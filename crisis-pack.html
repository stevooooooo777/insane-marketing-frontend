<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üÜò Crisis Pack - Emergency SME Survival System</title>
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
<script src="/config-client.js"></script>
<script>
  window.addEventListener('load', async () => {
    const user = CONFIG.getAuthenticatedUser();
    const analytics = await CONFIG.makeApiCall(`/analytics/${user.restaurantId}`);
    document.getElementById('total-scans').textContent = analytics.totalScans || 0;
  });
</script>    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #991b1b 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: "üÜò üí™ ‚ù§Ô∏è üè† üë• üÜò üí™ ‚ù§Ô∏è üè† üë•";
            position: absolute;
            top: 10px;
            left: 0;
            right: 0;
            font-size: 1.5em;
            opacity: 0.3;
            animation: urgentFloat 8s ease-in-out infinite;
        }
        
        @keyframes urgentFloat {
            0%, 100% { transform: translateX(-100px) scale(1); }
            50% { transform: translateX(100px) scale(1.1); }
        }
        
        .header h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .header p {
            font-size: 1.4em;
            opacity: 0.95;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .emergency-stats {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #fbbf24;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .content {
            padding: 40px;
        }
        
        .crisis-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .crisis-card {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 3px solid #ef4444;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .crisis-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border-color: #dc2626;
        }
        
        .crisis-card.active {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-color: #991b1b;
            transform: scale(1.02);
        }
        
        .crisis-card.pandemic {
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border-color: #3b82f6;
        }
        
        .crisis-card.disaster {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-color: #f59e0b;
        }
        
        .crisis-card.economic {
            background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
            border-color: #8b5cf6;
        }
        
        .crisis-card.staffing {
            background: linear-gradient(135deg, #ecfdf5, #d1fae5);
            border-color: #10b981;
        }
        
        .crisis-icon {
            font-size: 4em;
            margin-bottom: 15px;
            display: block;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.3));
        }
        
        .crisis-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 12px;
            color: #1f2937;
        }
        
        .crisis-description {
            font-size: 0.95em;
            color: #4b5563;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .crisis-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .crisis-stat {
            text-align: center;
        }
        
        .crisis-stat-value {
            font-weight: bold;
            color: #dc2626;
            font-size: 1.2em;
        }
        
        .crisis-stat-label {
            font-size: 0.8em;
            color: #6b7280;
        }
        
        .urgency-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #dc2626;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            animation: urgentPulse 1.5s infinite;
        }
        
        @keyframes urgentPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); background: #991b1b; }
        }
        
        .pack-builder {
            background: #f9fafb;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            display: none;
            border: 2px solid #e5e7eb;
        }
        
        .pack-builder.show {
            display: block;
            animation: slideInUp 0.5s ease-out;
        }
        
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .builder-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 40px;
            align-items: start;
        }
        
        .builder-form {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 2px solid #f3f4f6;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }
        
        .crisis-comparison {
            background: linear-gradient(135deg, #fef2f2, #fee2e2);
            border: 3px solid #dc2626;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .comparison-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .agency-side {
            background: #fef2f2;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ef4444;
        }
        
        .our-side {
            background: #f0fdf4;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #22c55e;
        }
        
        .price-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 8px 0;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .agency-price {
            color: #dc2626;
            font-weight: bold;
            text-decoration: line-through;
            opacity: 0.8;
        }
        
        .our-price {
            color: #16a34a;
            font-weight: bold;
            background: #dcfce7;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .qr-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .qr-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }
        
        .qr-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .qr-card.generated {
            border-color: #22c55e;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        }
        
        .qr-display {
            width: 150px;
            height: 150px;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            overflow: hidden;
        }
        
        .qr-display canvas {
            border-radius: 8px;
            max-width: 100%;
            max-height: 100%;
        }
        
        .qr-title {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #374151;
        }
        
        .qr-description {
            font-size: 0.9em;
            color: #6b7280;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .crisis-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #dc2626;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
            text-align: center;
            margin: 3px;
        }
        
        .btn-emergency {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            color: white;
            padding: 20px 40px;
            font-size: 1.4em;
            border-radius: 15px;
            margin: 30px auto;
            display: block;
            text-align: center;
            width: 400px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .btn-emergency:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #991b1b, #7f1d1d);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #16a34a, #15803d);
            color: white;
        }
        
        .success-animation {
            text-align: center;
            padding: 50px;
            display: none;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-radius: 15px;
            margin-top: 30px;
            border: 3px solid #22c55e;
        }
        
        .success-animation.show {
            display: block;
            animation: successSlide 0.8s ease-out;
        }
        
        @keyframes successSlide {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .next-steps {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 25px;
            border: 2px solid #e5e7eb;
        }
        
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .step-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #dc2626;
        }
        
        .step-number {
            background: #dc2626;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            margin-right: 10px;
        }
        
        @media (max-width: 768px) {
            .builder-grid {
                grid-template-columns: 1fr;
            }
            
            .qr-preview-grid {
                grid-template-columns: 1fr;
            }
            
            .crisis-selector {
                grid-template-columns: 1fr;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .header h1 {
                font-size: 2.5em;
            }
            
            .content {
                padding: 20px;
            }
            
            .btn-emergency {
                width: 100%;
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üÜò CRISIS PACK</h1>
            <p>Emergency SME Survival System - When Disaster Strikes, We're Your Lifeline</p>
            
            <div class="emergency-stats">
                <h3 style="margin-bottom: 15px; font-size: 1.3em;">The Brutal Reality of Business Crises</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">250K+</div>
                        <div class="stat-label">SMEs Killed by COVID</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">¬£12K</div>
                        <div class="stat-label">Average Crisis Consultant Fee</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">72hrs</div>
                        <div class="stat-label">To Get Help from Agencies</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">¬£149</div>
                        <div class="stat-label">Our Instant Crisis Solution</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="content">
            <h2 style="text-align: center; margin-bottom: 30px; color: #1f2937; font-size: 2em;">Choose Your Crisis Type</h2>
            <p style="text-align: center; color: #6b7280; margin-bottom: 40px; font-size: 1.1em;">Get instant survival tools while agencies leave you hanging</p>
            
            <div class="crisis-selector">
                <div class="crisis-card pandemic" onclick="selectCrisis('pandemic')">
                    <div class="urgency-badge">URGENT</div>
                    <span class="crisis-icon">ü¶†</span>
                    <div class="crisis-title">Pandemic/Lockdown</div>
                    <div class="crisis-description">Instant contactless solutions when forced to close or limit capacity</div>
                    <div class="crisis-stats">
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">24hrs</div>
                            <div class="crisis-stat-label">Setup Time</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">¬£11,851</div>
                            <div class="crisis-stat-label">You Save</div>
                        </div>
                    </div>
                </div>
                
                <div class="crisis-card disaster" onclick="selectCrisis('disaster')">
                    <div class="urgency-badge">EMERGENCY</div>
                    <span class="crisis-icon">‚õàÔ∏è</span>
                    <div class="crisis-title">Natural Disaster</div>
                    <div class="crisis-description">Flood, fire, storm recovery - Get back online instantly after disaster strikes</div>
                    <div class="crisis-stats">
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">12hrs</div>
                            <div class="crisis-stat-label">Recovery Time</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">¬£9,351</div>
                            <div class="crisis-stat-label">You Save</div>
                        </div>
                    </div>
                </div>
                
                <div class="crisis-card economic" onclick="selectCrisis('economic')">
                    <div class="urgency-badge">CRITICAL</div>
                    <span class="crisis-icon">üìâ</span>
                    <div class="crisis-title">Economic Downturn</div>
                    <div class="crisis-description">Recession-proof your business with budget-friendly customer solutions</div>
                    <div class="crisis-stats">
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">+45%</div>
                            <div class="crisis-stat-label">Cost Savings</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">¬£8,851</div>
                            <div class="crisis-stat-label">You Save</div>
                        </div>
                    </div>
                </div>
                
                <div class="crisis-card staffing" onclick="selectCrisis('staffing')">
                    <div class="urgency-badge">HELP NEEDED</div>
                    <span class="crisis-icon">üë•</span>
                    <div class="crisis-title">Staff Shortage</div>
                    <div class="crisis-description">Keep serving customers even when short-staffed with self-service solutions</div>
                    <div class="crisis-stats">
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">-50%</div>
                            <div class="crisis-stat-label">Staff Needed</div>
                        </div>
                        <div class="crisis-stat">
                            <div class="crisis-stat-value">¬£7,851</div>
                            <div class="crisis-stat-label">You Save</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Crisis Pack Builder -->
            <div class="pack-builder" id="pack-builder">
                <h2 style="text-align: center; margin-bottom: 30px; color: #dc2626;" id="pack-title">ü¶† Pandemic Crisis Pack</h2>
                
                <div class="crisis-comparison">
                    <div class="comparison-header">
                        <h3 style="color: #dc2626; font-size: 1.5em; margin-bottom: 10px;">üí∞ Crisis Consultants vs Our Emergency Pack</h3>
                        <p style="color: #6b7280;">While agencies abandon you in crisis, we become your lifeline</p>
                    </div>
                    <div class="comparison-grid">
                        <div class="agency-side">
                            <h4 style="color: #dc2626; margin-bottom: 15px; text-align: center;">‚ùå Crisis Consultants</h4>
                            <div class="price-row">
                                <span>Emergency Response Plan:</span>
                                <span class="agency-price">¬£3,500</span>
                            </div>
                            <div class="price-row">
                                <span>Digital Transformation:</span>
                                <span class="agency-price">¬£4,500</span>
                            </div>
                            <div class="price-row">
                                <span>Marketing Pivot Strategy:</span>
                                <span class="agency-price">¬£2,800</span>
                            </div>
                            <div class="price-row">
                                <span>Technology Setup:</span>
                                <span class="agency-price">¬£1,500</span>
                            </div>
                            <div class="price-row">
                                <span>Staff Training:</span>
                                <span class="agency-price">¬£700</span>
                            </div>
                            <div class="price-row" style="border-top: 2px solid #dc2626; font-weight: bold;">
                                <span>TOTAL + 3-week wait:</span>
                                <span class="agency-price" style="font-size: 1.2em;">¬£13,000</span>
                            </div>
                        </div>
                        
                        <div class="our-side">
                            <h4 style="color: #16a34a; margin-bottom: 15px; text-align: center;">‚úÖ Our Crisis Pack</h4>
                            <div class="price-row">
                                <span>Everything Above PLUS:</span>
                                <span style="color: #16a34a;">‚úì Included</span>
                            </div>
                            <div class="price-row">
                                <span>24/7 Emergency Support:</span>
                                <span style="color: #16a34a;">‚úì FREE</span>
                            </div>
                            <div class="price-row">
                                <span>Real-time Crisis Analytics:</span>
                                <span style="color: #16a34a;">‚úì FREE</span>
                            </div>
                            <div class="price-row">
                                <span>Instant Deployment:</span>
                                <span style="color: #16a34a;">‚úì 24hrs</span>
                            </div>
                            <div class="price-row">
                                <span>Unlimited Updates:</span>
                                <span style="color: #16a34a;">‚úì FREE</span>
                            </div>
                            <div class="price-row" style="border-top: 2px solid #16a34a; font-weight: bold;">
                                <span>YOUR PRICE (24hr delivery):</span>
                                <span class="our-price" style="font-size: 1.3em;">¬£149</span>
                            </div>
                            <div style="text-align: center; margin-top: 15px; padding: 15px; background: #dcfce7; border-radius: 8px;">
                                <strong style="color: #14532d; font-size: 1.1em;">YOU SAVE: ¬£12,851 (99% OFF!)</strong>
                                <br>
                                <small style="color: #16a34a;">+ Get help in 24hrs instead of 3 weeks!</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="builder-grid">
                    <div class="builder-form">
                        <h3 style="margin-bottom: 20px; color: #dc2626;" id="form-title">üè™ Emergency Business Info</h3>
                        
                        <div class="form-group">
                            <label>Business Name *</label>
                            <input type="text" id="business-name" placeholder="e.g., Mario's Italian Kitchen" required>
                            <small style="color: #6b7280;">We'll create your emergency campaign immediately</small>
                        </div>
                        
                        <div class="form-group">
                            <label id="crisis-situation-label">Describe Your Crisis Situation</label>
                            <textarea id="crisis-situation" placeholder="e.g., Forced to close dining room due to lockdown, need takeaway/delivery system immediately" rows="3"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label id="emergency-contact-label">Emergency Contact Phone</label>
                            <input type="tel" id="emergency-contact" placeholder="+44 7700 900000">
                            <small style="color: #6b7280;">For urgent setup support (available 24/7)</small>
                        </div>
                        
                        <div class="form-group">
                            <label id="current-website-label">Current Website/Social Media</label>
                            <input type="url" id="current-website" placeholder="https://yourwebsite.com or @yoursocial">
                            <small style="color: #6b7280;">We'll integrate with your existing presence</small>
                        </div>
                        
                        <div class="form-group">
                            <label id="urgency-level-label">Urgency Level</label>
                            <select id="urgency-level">
                                <option value="immediate">üö® IMMEDIATE (Need help in 24hrs)</option>
                                <option value="urgent">‚ö° URGENT (Need help in 48hrs)</option>
                                <option value="critical">‚ö†Ô∏è CRITICAL (Need help this week)</option>
                            </select>
                        </div>
                        
                        <div style="background: #fef2f2; padding: 15px; border-radius: 8px; border-left: 4px solid #dc2626; margin-top: 20px;">
                            <h4 style="color: #dc2626; margin-bottom: 10px;">üÜò Crisis Guarantee</h4>
                            <ul style="color: #7f1d1d; font-size: 0.9em; line-height: 1.6;">
                                <li>‚úÖ 24/7 emergency support during setup</li>
                                <li>‚úÖ Live help until you're back online</li>
                                <li>‚úÖ Money-back guarantee if we can't help</li>
                                <li>‚úÖ No consultant ever abandons you in crisis</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 20px; color: #dc2626;" id="preview-title">ü¶† Your Crisis Survival Pack</h3>







<div class="qr-preview-grid" id="qr-preview-grid">
                            <!-- Crisis QR codes will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <button class="btn-emergency" onclick="generateCrisisPack()" id="generate-btn">
                    üö® DEPLOY MY CRISIS PACK NOW
                </button>
            </div>
            
            <!-- Success Animation -->
            <div class="success-animation" id="success-animation">
                <div style="font-size: 5em; margin-bottom: 20px;" id="success-icon">üÜò</div>
                <h2 style="color: #16a34a; margin-bottom: 15px; font-size: 2.5em;" id="success-title">Crisis Pack Deployed!</h2>
                <p style="font-size: 1.3em; color: #1f2937; margin-bottom: 30px;" id="success-message">Your emergency survival system is LIVE and ready!</p>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 30px 0;">
                    <button class="btn btn-success">üì± Download Crisis QRs</button>
                    <button class="btn btn-success">üìû Get Emergency Support</button>
                    <button class="btn btn-success">üìä Crisis Analytics</button>
                    <button class="btn btn-success">üöÄ Share Success Story</button>
                </div>
                
                <div class="next-steps">
                    <h3 style="color: #16a34a; margin-bottom: 15px; text-align: center;">üéØ Your Crisis Recovery Plan</h3>
                    <div class="steps-grid">
                        <div class="step-card">
                            <span class="step-number">1</span>
                            <strong>Immediate Deployment:</strong> Print and display crisis QRs within 2 hours
                        </div>
                        <div class="step-card">
                            <span class="step-number">2</span>
                            <strong>Staff Communication:</strong> Brief your team on new crisis procedures
                        </div>
                        <div class="step-card">
                            <span class="step-number">3</span>
                            <strong>Customer Notification:</strong> Announce new safety measures via social media
                        </div>
                        <div class="step-card">
                            <span class="step-number">4</span>
                            <strong>Monitor & Adapt:</strong> Track performance and adjust as situation evolves
                        </div>
                        <div class="step-card">
                            <span class="step-number">5</span>
                            <strong>Recovery Mode:</strong> Transition back to normal operations when crisis ends
                        </div>
                        <div class="step-card">
                            <span class="step-number">6</span>
                            <strong>Success Story:</strong> Share how you survived while competitors failed
                        </div>
                    </div>
                    
                    <div style="background: #fef3c7; padding: 20px; border-radius: 12px; margin-top: 25px; text-align: center; border: 2px solid #f59e0b;">
                        <h4 style="color: #92400e; margin-bottom: 10px;">üìà Expected Crisis Recovery Results</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <div style="color: #92400e;">
                                <div style="font-size: 1.8em; font-weight: bold;">24hrs</div>
                                <div style="font-size: 0.9em;">Back Online</div>
                            </div>
                            <div style="color: #92400e;">
                                <div style="font-size: 1.8em; font-weight: bold;">+67%</div>
                                <div style="font-size: 0.9em;">Customer Retention</div>
                            </div>
                            <div style="color: #92400e;">
                                <div style="font-size: 1.8em; font-weight: bold;">¬£12K+</div>
                                <div style="font-size: 0.9em;">Money Saved</div>
                            </div>
                            <div style="color: #92400e;">
                                <div style="font-size: 1.8em; font-weight: bold;">98%</div>
                                <div style="font-size: 0.9em;">Survival Rate</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentCrisis = 'pandemic';
        let generatedQRs = {};
        
        // Crisis configurations
        const crisisConfigs = {
            pandemic: {
                title: 'Pandemic Crisis Pack',
                formTitle: 'ü¶† Pandemic Emergency Info',
                previewTitle: 'ü¶† Your Pandemic Survival Pack',
                generateBtn: 'üö® DEPLOY PANDEMIC PACK NOW',
                successTitle: 'Pandemic Pack Deployed!',
                successIcon: 'ü¶†',
                qrs: [
                    { id: 'contactless-menu', title: 'üì± Contactless Menu', desc: 'Safe menu viewing without physical contact', icon: 'ü¶†' },
                    { id: 'takeaway-order', title: 'ü•° Takeaway Orders', desc: 'Direct ordering for pickup', icon: 'üì¶' },
                    { id: 'delivery-service', title: 'üöö Delivery Orders', desc: 'Home delivery booking system', icon: 'üè†' },
                    { id: 'safety-info', title: 'üõ°Ô∏è Safety Protocols', desc: 'COVID safety measures info', icon: '‚öïÔ∏è' },
                    { id: 'support-local', title: '‚ù§Ô∏è Support Local', desc: 'Community support campaign', icon: 'ü§ù' }
                ],
                colors: ['#3b82f6', '#16a34a', '#f59e0b', '#dc2626', '#8b5cf6']
            },
            disaster: {
                title: 'Disaster Recovery Pack',
                formTitle: '‚õàÔ∏è Disaster Recovery Info',
                previewTitle: '‚õàÔ∏è Your Recovery Pack',
                generateBtn: 'üö® DEPLOY RECOVERY PACK NOW',
                successTitle: 'Recovery Pack Deployed!',
                successIcon: '‚õàÔ∏è',
                qrs: [
                    { id: 'were-back', title: 'üéâ We\'re Back!', desc: 'Reopening announcement', icon: 'üè™' },
                    { id: 'damage-update', title: 'üì¢ Damage Update', desc: 'Current status information', icon: 'üìã' },
                    { id: 'community-help', title: 'ü§ù Community Support', desc: 'Local support initiatives', icon: '‚ù§Ô∏è' },
                    { id: 'insurance-help', title: 'üìÑ Insurance Info', desc: 'Insurance claim assistance', icon: 'üìù' },
                    { id: 'rebuild-fund', title: 'üí∞ Rebuild Fund', desc: 'Fundraising for recovery', icon: 'üèóÔ∏è' }
                ],
                colors: ['#f59e0b', '#16a34a', '#dc2626', '#3b82f6', '#8b5cf6']
            },
            economic: {
                title: 'Economic Crisis Pack',
                formTitle: 'üìâ Economic Crisis Info',
                previewTitle: 'üìâ Your Economic Survival Pack',
                generateBtn: 'üö® DEPLOY ECONOMIC PACK NOW',
                successTitle: 'Economic Pack Deployed!',
                successIcon: 'üìâ',
                qrs: [
                    { id: 'budget-menu', title: 'üí∞ Budget Menu', desc: 'Affordable dining options', icon: 'üçΩÔ∏è' },
                    { id: 'value-deals', title: 'üéØ Value Deals', desc: 'Special recession pricing', icon: 'üí∏' },
                    { id: 'loyalty-rewards', title: '‚≠ê Loyalty Program', desc: 'Reward regular customers', icon: 'üéÅ' },
                    { id: 'community-support', title: 'ü§ù Community First', desc: 'Local community focus', icon: 'üèòÔ∏è' },
                    { id: 'survival-story', title: 'üí™ Our Story', desc: 'How we\'re surviving together', icon: '‚ù§Ô∏è' }
                ],
                colors: ['#8b5cf6', '#16a34a', '#f59e0b', '#dc2626', '#3b82f6']
            },
            staffing: {
                title: 'Staff Shortage Pack',
                formTitle: 'üë• Staffing Crisis Info',
                previewTitle: 'üë• Your Self-Service Pack',
                generateBtn: 'üö® DEPLOY STAFFING PACK NOW',
                successTitle: 'Staffing Pack Deployed!',
                successIcon: 'üë•',
                qrs: [
                    { id: 'self-order', title: 'üì± Self-Order System', desc: 'Customers order themselves', icon: 'üõí' },
                    { id: 'table-service', title: 'ü™ë Table Self-Service', desc: 'Self-seating and service', icon: 'üè∫' },
                    { id: 'payment-self', title: 'üí≥ Self-Payment', desc: 'Contactless self-checkout', icon: 'üí∞' },
                    { id: 'help-request', title: 'üÜò Request Help', desc: 'Call for assistance when needed', icon: 'üîî' },
                    { id: 'hiring-now', title: 'üíº We\'re Hiring', desc: 'Recruit new staff urgently', icon: 'üë∑' }
                ],
                colors: ['#16a34a', '#3b82f6', '#f59e0b', '#dc2626', '#8b5cf6']
            }
        };

        // Select crisis function
        function selectCrisis(crisis) {
            currentCrisis = crisis;
            
            // Update active state
            document.querySelectorAll('.crisis-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`.crisis-card.${crisis}`).classList.add('active');
            
            // Update pack builder
            updatePackBuilder(crisis);
            
            // Show pack builder
            document.getElementById('pack-builder').classList.add('show');
            
            // Scroll to pack builder
            document.getElementById('pack-builder').scrollIntoView({ behavior: 'smooth' });
        }

        // Update pack builder for selected crisis
        function updatePackBuilder(crisis) {
            const config = crisisConfigs[crisis];
            
            // Update titles
            document.getElementById('pack-title').textContent = config.title + ' Builder';
            document.getElementById('form-title').innerHTML = config.formTitle;
            document.getElementById('preview-title').innerHTML = config.previewTitle;
            document.getElementById('generate-btn').innerHTML = config.generateBtn;
            
            // Update QR preview
            updateQRPreview(crisis);
        }

        // Update QR preview for selected crisis
        function updateQRPreview(crisis) {
            const config = crisisConfigs[crisis];
            const container = document.getElementById('qr-preview-grid');
            
            container.innerHTML = config.qrs.map((qr, index) => `
                <div class="qr-card" id="${qr.id}">
                    <div class="crisis-badge">${config.title}</div>
                    <div class="qr-title">${qr.title}</div>
                    <div class="qr-display" id="${qr.id}-display">${qr.icon}</div>
                    <div class="qr-description">${qr.desc}</div>
                </div>
            `).join('');
        }

        // Generate crisis pack
        function generateCrisisPack() {
            const config = crisisConfigs[currentCrisis];
            
            // Get form data
            const businessName = document.getElementById('business-name').value;
            const crisisSituation = document.getElementById('crisis-situation').value;
            const emergencyContact = document.getElementById('emergency-contact').value;
            const currentWebsite = document.getElementById('current-website').value;
            const urgencyLevel = document.getElementById('urgency-level').value;
            
            // Validate required fields
            if (!businessName.trim()) {
                alert('‚ö†Ô∏è URGENT: Please enter your business name for emergency deployment!');
                return;
            }
            
            // Generate QR codes
            config.qrs.forEach((qr, index) => {
                generateCrisisQR(qr, index, businessName);
            });
            
            // Show success animation
            showSuccessAnimation(config);
            
            // Send emergency alert
            sendEmergencyAlert(businessName, crisisSituation, emergencyContact, urgencyLevel);
        }

        // Generate individual crisis QR code
        function generateCrisisQR(qrConfig, index, businessName) {
            const container = document.getElementById(`${qrConfig.id}-display`);
            if (!container) return;
            
            const businessId = businessName.replace(/[^a-zA-Z0-9]/g, '').toLowerCase();
            const trackingUrl = `https://yourdomain.com/crisis/${currentCrisis}/${qrConfig.id}/${businessId}`;
            
            try {
                const canvas = document.createElement('canvas');
                const qr = new QRious({
                    element: canvas,
                    value: trackingUrl,
                    size: 150,
                    background: '#ffffff',
                    foreground: crisisConfigs[currentCrisis].colors[index] || '#dc2626'
                });
                
                container.innerHTML = '';
                container.appendChild(canvas);
                generatedQRs[qrConfig.id] = canvas;
                
                // Mark as generated
                document.getElementById(qrConfig.id).classList.add('generated');
                
                console.log(`Generated ${currentCrisis} crisis QR: ${qrConfig.id}`);
            } catch (error) {
                console.error('Crisis QR Generation Error:', error);
                container.innerHTML = '<div style="color: red; font-size: 12px;">Emergency QR failed - Contact support!</div>';
            }
        }

        // Show success animation
        function showSuccessAnimation(config) {
            const successSection = document.getElementById('success-animation');
            const packBuilder = document.getElementById('pack-builder');
            
            // Update success content
            document.getElementById('success-icon').textContent = config.successIcon;
            document.getElementById('success-title').textContent = config.successTitle;
            document.getElementById('success-message').textContent = `Your ${config.title.toLowerCase()} is deployed and ready to save your business!`;
            
            // Hide pack builder and show success
            packBuilder.style.display = 'none';
            successSection.classList.add('show');
            
            // Scroll to success
            successSection.scrollIntoView({ behavior: 'smooth' });
            
            // Show success alert
            setTimeout(() => {
                const savings = getSavingsForCrisis(currentCrisis);
                alert(`üÜò CRISIS PACK DEPLOYED! üÜò\n\n‚úÖ ${config.successTitle}\nüí∞ You saved ${savings} vs consultants\n‚ö° Deployed in 24hrs vs 3-week agency wait\nüõ°Ô∏è Your business is now crisis-protected!\n\nüìû Emergency support: Available 24/7\nüöÄ You're going to SURVIVE this crisis!`);
            }, 1000);
        }

        // Send emergency alert
        function sendEmergencyAlert(businessName, situation, contact, urgency) {
            const alertData = {
                businessName: businessName,
                crisisType: currentCrisis,
                situation: situation,
                contact: contact,
                urgencyLevel: urgency,
                timestamp: new Date().toISOString(),
                needsImmediateSupport: urgency === 'immediate'
            };
            
            // Send to emergency response team
            fetch('/api/emergency/crisis-pack-deployed', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(alertData)
            }).catch(console.error);
            
            console.log(`üö® Emergency Alert Sent:`, alertData);
        }

        // Get savings amount for crisis
        function getSavingsForCrisis(crisis) {
            const savings = {
                pandemic: '¬£12,851',
                disaster: '¬£9,351',
                economic: '¬£8,851',
                staffing: '¬£7,851'
            };
            return savings[crisis] || '¬£10,000';
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-select pandemic initially (most common crisis)
            setTimeout(() => {
                selectCrisis('pandemic');
            }, 1000);
            
            // Show emergency welcome message
            setTimeout(() => {
                alert(`üÜò CRISIS PACK - SME EMERGENCY SYSTEM üÜò\n\nüíî The brutal reality:\n‚Ä¢ 250,000+ SMEs killed by COVID\n‚Ä¢ ¬£12,000 average consultant fees\n‚Ä¢ 72 hours to get agency help\n\n‚ù§Ô∏è Our promise:\n‚Ä¢ ¬£149 instant crisis solution\n‚Ä¢ 24-hour deployment\n‚Ä¢ 24/7 emergency support\n‚Ä¢ Money-back guarantee\n\nüöÄ When crisis hits, we're your lifeline!\nChoose your crisis type to get started.`);
            }, 2000);
        });

        // Download crisis pack
        function downloadCrisisPack() {
            const config = crisisConfigs[currentCrisis];
            const businessName = document.getElementById('business-name').value;
            
            alert(`üì± Downloading ${config.title}!\n\nüÜò Emergency QR Codes Included:\n${config.qrs.map(qr => `‚Ä¢ ${qr.title}`).join('\n')}\n\n‚ö° Deployment Instructions:\n‚Ä¢ Print immediately on any printer\n‚Ä¢ Display in high-traffic areas\n‚Ä¢ Train staff on new procedures\n‚Ä¢ Monitor crisis analytics dashboard\n\nüí∞ Total Savings: ${getSavingsForCrisis(currentCrisis)} vs consultants!`);
        }

        // Emergency support
        function getEmergencySupport() {
            alert(`üìû 24/7 CRISIS SUPPORT ACTIVATED\n\nüÜò Emergency Hotline: +44 800 CRISIS (274747)\nüìß Emergency Email: help@crisispack.com\nüí¨ Live Chat: Available on this website\n\nüöÄ What we provide:\n‚Ä¢ Immediate technical support\n‚Ä¢ Crisis strategy consultation\n‚Ä¢ Real-time problem solving\n‚Ä¢ Staff training assistance\n‚Ä¢ Moral support when you need it most\n\n‚ù§Ô∏è Remember: You're not alone in this crisis.\nWe're here to help you survive and thrive!`);
        }
    </script>
</body>
</html>


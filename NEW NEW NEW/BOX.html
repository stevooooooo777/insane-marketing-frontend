<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mission Control - Premium Hospitality Intelligence</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: white;
            overflow: hidden;
            height: 100vh;
        }

        /* Overview Mode */
        .overview-mode {
            display: none;
            flex-direction: column;
            padding: 20px;
            gap: 20px;
            height: 100vh;
            overflow-y: auto;
        }

        .overview-mode.active {
            display: flex;
        }

        .overview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px 25px;
            flex-shrink: 0;
            gap: 15px;
            flex-wrap: wrap;
        }

        .ai-active-button {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: ai-active-pulse 2s infinite;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
            border: 2px solid rgba(139, 92, 246, 0.8);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        @keyframes ai-active-pulse {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 30px rgba(139, 92, 246, 0.8);
                transform: scale(1.02);
            }
        }

        .ai-active-button:hover {
            transform: scale(1.05) !important;
            box-shadow: 0 0 35px rgba(139, 92, 246, 0.9) !important;
        }

        .ai-status-dot {
            width: 10px;
            height: 10px;
            background: #22c55e;
            border-radius: 50%;
            animation: status-blink 1.5s infinite;
        }

        @keyframes status-blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .ai-icon-spin {
            animation: rotate 3s linear infinite;
        }

        .overview-title {
            font-size: 1.8em;
            font-weight: 900;
        }

        .critical-alert {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 0.95em;
            animation: urgent-pulse 1s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .critical-alert:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.6);
        }

        .critical-alert:active {
            transform: scale(0.98);
        }

        @keyframes urgent-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .live-badge {
            background: #22c55e;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .sections-overview {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            min-height: 0;
        }

        @media (max-height: 900px) {
            .sections-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .sections-overview {
                grid-template-columns: 1fr;
            }
        }

        .section-card {
            background: rgba(255, 255, 255, 0.03);
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 280px;
            position: relative;
        }

        .section-card::after {
            content: "Click to view details →";
            position: absolute;
            bottom: 15px;
            right: 20px;
            font-size: 0.9em;
            color: #fbbf24;
            font-weight: 700;
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .section-card:hover::after {
            opacity: 1;
            transform: translateX(5px);
        }

        .section-card:hover {
            transform: scale(1.03);
            border-color: rgba(251, 191, 36, 0.5);
            box-shadow: 0 30px 80px rgba(251, 191, 36, 0.3);
        }

        .section-card.has-urgent {
            border-color: rgba(239, 68, 68, 0.5);
            animation: card-urgent 2s infinite;
        }

        @keyframes card-urgent {
            0%, 100% { box-shadow: 0 0 30px rgba(239, 68, 68, 0.4); }
            50% { box-shadow: 0 0 60px rgba(239, 68, 68, 0.7); }
        }

        .section-name {
            font-size: 2.2em;
            font-weight: 900;
            margin-bottom: 15px;
        }

        .section-priority {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .priority-badge {
            padding: 10px 16px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .priority-badge:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.3);
        }

        .priority-badge:active {
            transform: scale(0.95);
        }

        .priority-badge.urgent {
            background: rgba(239, 68, 68, 0.3);
            border: 2px solid #ef4444;
            color: #fca5a5;
        }

        .priority-badge.attention {
            background: rgba(245, 158, 11, 0.3);
            border: 2px solid #f59e0b;
            color: #fcd34d;
        }

        .priority-badge.active {
            background: rgba(34, 197, 94, 0.3);
            border: 2px solid #22c55e;
            color: #86efac;
        }

        .section-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: 900;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 6px;
        }

        .stat-value.urgent-stat {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 0.9em;
            color: #94a3b8;
            font-weight: 600;
        }

        /* Click instruction animation */
        .click-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            border-radius: 50%;
            animation: clickPulse 2s infinite;
            pointer-events: none;
        }

        .click-pulse.urgent {
            border: 4px solid #ef4444;
            box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
        }

        .click-pulse.attention {
            border: 4px solid #f59e0b;
            box-shadow: 0 0 30px rgba(245, 158, 11, 0.6);
        }

        .click-pulse.active {
            border: 4px solid #22c55e;
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
        }

        @keyframes clickPulse {
            0% { 
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            50% { 
                transform: translate(-50%, -50%) scale(1.2);
                opacity: 0.8;
            }
            100% { 
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
        }

        .section-card:hover .click-pulse {
            animation: clickPulse 1.5s infinite;
        }

        .section-card.has-urgent .click-pulse.urgent {
            animation: clickPulse 1s infinite;
        }

        .section-card .click-pulse.attention {
            animation: clickPulse 3s infinite;
            opacity: 0.4;
        }

        .section-card .click-pulse.active {
            animation: none;
        }

        .section-card:hover .click-pulse.active {
            animation: clickPulse 1.5s infinite;
        }

        /* Detail Mode */
        .detail-mode {
            display: none;
            grid-template-rows: 80px 1fr 100px;
            height: 100vh;
            padding: 20px;
            gap: 20px;
        }

        .detail-mode.active {
            display: grid;
        }

        /* Navigation Bar */
        .nav-bar {
            display: flex;
            gap: 15px;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px 20px;
        }

        .nav-back {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 12px 25px;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .nav-back:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #fbbf24;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            flex: 1;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            font-size: 1.1em;
        }

        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(251, 191, 36, 0.3);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            border-color: #fbbf24;
            color: #000;
        }

        .nav-tab.has-urgent {
            border-color: rgba(239, 68, 68, 0.5);
            animation: tab-pulse 2s infinite;
        }

        @keyframes tab-pulse {
            0%, 100% { box-shadow: 0 0 15px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 0 25px rgba(239, 68, 68, 0.6); }
        }

        .nav-arrows {
            display: flex;
            gap: 10px;
        }

        .nav-arrow {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
            font-weight: 700;
        }

        .nav-arrow:hover:not(.disabled) {
            background: rgba(255, 255, 255, 0.2);
            border-color: #fbbf24;
        }

        .nav-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* Section Content */
        .section-content {
            display: none;
            height: 100%;
            overflow-y: auto;
        }

        .section-content.active {
            display: block;
        }

        .section-detail {
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            height: 100%;
        }

        .detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .detail-title {
            font-size: 2.5em;
            font-weight: 900;
        }

        .detail-status {
            display: flex;
            gap: 15px;
        }

        .status-indicator {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .status-indicator:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
        }

        .status-indicator:active {
            transform: scale(0.95);
        }

        .status-indicator.active {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .status-indicator.attention {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-indicator.urgent {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            animation: urgent-pulse 1s infinite;
        }

        .boxes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .box-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #6b7280;
            padding: 25px;
            border-radius: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .box-item:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.2);
        }

        .box-item:active {
            transform: translateY(-2px);
        }

        .box-item.active {
            border-left-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .box-item.attention {
            border-left-color: #f59e0b;
            background: rgba(245, 158, 11, 0.1);
            animation: box-glow 2s infinite;
        }

        .box-item.urgent {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            animation: box-glow-urgent 1s infinite;
        }

        @keyframes box-glow {
            0%, 100% { box-shadow: 0 0 15px rgba(245, 158, 11, 0.3); }
            50% { box-shadow: 0 0 30px rgba(245, 158, 11, 0.6); }
        }

        @keyframes box-glow-urgent {
            0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
            50% { box-shadow: 0 0 40px rgba(239, 68, 68, 0.8); }
        }

        .box-item.highlighted {
            animation: highlight-flash 1.5s ease-in-out 3;
            border: 3px solid #fbbf24;
        }

        @keyframes highlight-flash {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
            }
            50% { 
                box-shadow: 0 0 40px rgba(251, 191, 36, 0.8);
                transform: translateY(-5px) scale(1.02);
            }
        }

        .box-number {
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .box-number::after {
            content: "→";
            opacity: 0;
            transition: all 0.3s ease;
            color: #fbbf24;
            font-size: 1.2em;
        }

        .box-item:hover .box-number::after {
            opacity: 1;
            transform: translateX(5px);
        }

        .box-guests {
            color: #cbd5e1;
            font-size: 0.95em;
            margin-bottom: 8px;
        }

        .box-status {
            color: #94a3b8;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .box-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .metric-item {
            text-align: center;
        }

        .metric-value {
            font-size: 1.4em;
            font-weight: 900;
            line-height: 1;
            margin-bottom: 5px;
        }

        .metric-value.guests-count {
            color: #fbbf24;
        }

        .metric-value.orders-count {
            color: #60a5fa;
        }

        .metric-value.sentiment-positive {
            color: #22c55e;
        }

        .metric-value.sentiment-negative {
            color: #ef4444;
        }

        .metric-value.sentiment-neutral {
            color: #94a3b8;
        }

        .metric-label {
            font-size: 0.7em;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
        }

        /* AI Prediction Styles */
        .ai-badge {
            display: inline-block;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 700;
            color: #fff;
            margin-left: 8px;
            animation: ai-glow 2s infinite;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.4);
        }

        @keyframes ai-glow {
            0%, 100% { box-shadow: 0 0 15px rgba(139, 92, 246, 0.4); }
            50% { box-shadow: 0 0 25px rgba(139, 92, 246, 0.7); }
        }

        .ai-prediction-banner {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(99, 102, 241, 0.15));
            border: 2px solid rgba(139, 92, 246, 0.4);
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: ai-pulse 3s infinite;
        }

        @keyframes ai-pulse {
            0%, 100% { border-color: rgba(139, 92, 246, 0.4); }
            50% { border-color: rgba(139, 92, 246, 0.7); }
        }

        .ai-icon {
            font-size: 1.5em;
            animation: rotate 4s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .ai-prediction-text {
            flex: 1;
            font-size: 0.9em;
            color: #e0e7ff;
            font-weight: 600;
        }

        .ai-confidence {
            background: rgba(139, 92, 246, 0.3);
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.8em;
            font-weight: 700;
            color: #c4b5fd;
            white-space: nowrap;
        }

        .ai-insights-section {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(99, 102, 241, 0.1));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .ai-section-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .ai-section-title {
            font-size: 1.3em;
            font-weight: 900;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .ai-insight-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 12px;
            border-left: 3px solid #8b5cf6;
        }

        .ai-insight-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .ai-insight-type {
            font-weight: 700;
            color: #c4b5fd;
            font-size: 0.9em;
        }

        .ai-insight-score {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .confidence-bar {
            width: 60px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #6366f1);
            transition: width 0.5s ease;
        }

        .confidence-text {
            font-size: 0.75em;
            color: #94a3b8;
            font-weight: 600;
        }

        .ai-insight-message {
            color: #e0e7ff;
            line-height: 1.5;
            font-size: 0.95em;
        }

        .ai-recommendation {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(16, 185, 129, 0.15));
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 10px;
            padding: 12px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-recommendation-icon {
            font-size: 1.2em;
        }

        .ai-recommendation-text {
            flex: 1;
            color: #86efac;
            font-weight: 600;
            font-size: 0.9em;
        }

        .sentiment-trend {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-top: 10px;
        }

        .trend-arrow {
            font-size: 1.5em;
            font-weight: 900;
        }

        .trend-up {
            color: #22c55e;
        }

        .trend-down {
            color: #ef4444;
        }

        .trend-stable {
            color: #f59e0b;
        }

        .trend-text {
            font-size: 0.9em;
            color: #cbd5e1;
        }

        .risk-meter {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-top: 10px;
        }

        .risk-meter-bar {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            position: relative;
        }

        .risk-meter-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .risk-low .risk-meter-fill {
            width: 25%;
            background: linear-gradient(90deg, #22c55e, #16a34a);
        }

        .risk-medium .risk-meter-fill {
            width: 55%;
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .risk-high .risk-meter-fill {
            width: 85%;
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }

        .risk-label {
            font-weight: 700;
            font-size: 0.85em;
            white-space: nowrap;
        }

        .risk-low .risk-label {
            color: #22c55e;
        }

        .risk-medium .risk-label {
            color: #f59e0b;
        }

        .risk-high .risk-label {
            color: #ef4444;
        }

        /* Box Detail Modal */
        .box-detail-modal {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 600px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.98), rgba(20, 20, 20, 0.98));
            z-index: 400;
            transition: right 0.4s ease;
            overflow-y: auto;
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
        }

        .box-detail-modal.active {
            right: 0;
        }

        .box-detail-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 399;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .box-detail-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .box-detail-header {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
            border-bottom: 2px solid rgba(251, 191, 36, 0.3);
            padding: 25px;
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(10px);
        }

        .box-detail-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(239, 68, 68, 0.3);
            border: 2px solid #ef4444;
            border-radius: 50%;
            color: #fff;
            font-size: 1.5em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .box-detail-close:hover {
            background: rgba(239, 68, 68, 0.5);
            transform: rotate(90deg);
        }

        .box-detail-title {
            font-size: 2em;
            font-weight: 900;
            margin-bottom: 10px;
        }

        .box-detail-subtitle {
            color: #94a3b8;
            font-size: 1.1em;
        }

        .box-detail-content {
            padding: 30px 25px;
        }

        .detail-section {
            margin-bottom: 35px;
        }

        .detail-section-title {
            font-size: 1.3em;
            font-weight: 900;
            color: #fbbf24;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .detail-section-title::before {
            content: "";
            width: 4px;
            height: 20px;
            background: linear-gradient(to bottom, #fbbf24, #f59e0b);
            border-radius: 2px;
        }

        .guest-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid rgba(251, 191, 36, 0.5);
        }

        .info-label {
            font-size: 0.8em;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.2em;
            font-weight: 700;
            color: #fff;
        }

        .vip-badge {
            display: inline-block;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            color: #000;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: 900;
            margin-left: 10px;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: "";
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #fbbf24, #f59e0b);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 3px solid rgba(255, 255, 255, 0.1);
        }

        .timeline-item::before {
            content: "";
            position: absolute;
            left: -23px;
            top: 20px;
            width: 10px;
            height: 10px;
            background: #fbbf24;
            border-radius: 50%;
            border: 2px solid #000;
        }

        .timeline-item.positive::before {
            background: #22c55e;
        }

        .timeline-item.negative::before {
            background: #ef4444;
        }

        .timeline-time {
            font-size: 0.8em;
            color: #64748b;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .timeline-text {
            color: #cbd5e1;
            line-height: 1.5;
        }

        .timeline-type {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 8px;
            font-size: 0.75em;
            font-weight: 700;
            margin-left: 8px;
        }

        .timeline-type.positive {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .timeline-type.negative {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .order-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .order-name {
            font-weight: 600;
            color: #cbd5e1;
        }

        .order-time {
            font-size: 0.85em;
            color: #64748b;
        }

        .order-status {
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: 700;
        }

        .order-status.completed {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .order-status.pending {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn.primary {
            background: linear-gradient(45deg, #22c55e, #16a34a);
            color: #fff;
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .action-btn.danger {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            color: #fff;
        }

        .action-btn.warning {
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: #000;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .action-btn:active {
            transform: translateY(0);
        }

        .revenue-highlight {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1));
            border: 2px solid rgba(34, 197, 94, 0.3);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .revenue-amount {
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(45deg, #22c55e, #16a34a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 5px;
        }

        .revenue-label {
            color: #64748b;
            font-size: 0.9em;
            font-weight: 600;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 8px;
        }

        /* Priority Alert Modal */
        .priority-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 600px;
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.98), rgba(0, 0, 0, 0.98));
            border: 2px solid rgba(239, 68, 68, 0.5);
            border-radius: 20px;
            padding: 30px;
            z-index: 500;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(239, 68, 68, 0.4);
        }

        .priority-modal.active {
            opacity: 1;
            pointer-events: all;
            transform: translate(-50%, -50%) scale(1);
        }

        .priority-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 499;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .priority-modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .priority-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(239, 68, 68, 0.3);
        }

        .priority-modal-title {
            font-size: 1.8em;
            font-weight: 900;
            color: #ef4444;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .priority-modal-close {
            width: 35px;
            height: 35px;
            background: rgba(239, 68, 68, 0.3);
            border: 2px solid #ef4444;
            border-radius: 50%;
            color: #fff;
            font-size: 1.3em;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .priority-modal-close:hover {
            background: rgba(239, 68, 68, 0.5);
            transform: rotate(90deg);
        }

        .priority-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .priority-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #ef4444;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .priority-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(239, 68, 68, 0.3);
        }

        .priority-item.attention {
            border-left-color: #f59e0b;
        }

        .priority-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .priority-item-location {
            font-size: 1.2em;
            font-weight: 700;
            color: #fff;
        }

        .priority-item-badge {
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 0.8em;
            font-weight: 700;
        }

        .priority-item-badge.urgent {
            background: rgba(239, 68, 68, 0.3);
            color: #fca5a5;
            border: 1px solid #ef4444;
        }

        .priority-item-badge.attention {
            background: rgba(245, 158, 11, 0.3);
            color: #fcd34d;
            border: 1px solid #f59e0b;
        }

        .priority-item-issue {
            color: #cbd5e1;
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .priority-item-action {
            color: #94a3b8;
            font-size: 0.9em;
            font-style: italic;
        }

        .priority-item-arrow {
            float: right;
            color: #fbbf24;
            font-weight: 700;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .priority-item:hover .priority-item-arrow {
            opacity: 1;
            transform: translateX(5px);
        }
        .help-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 300;
            animation: fadeIn 0.3s ease;
            overflow-y: auto;
            padding: 20px;
        }

        .help-overlay.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .help-content {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
            position: relative;
            margin: auto;
        }

        .help-close-x {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(239, 68, 68, 0.3);
            border: 2px solid #ef4444;
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .help-close-x:hover {
            background: rgba(239, 68, 68, 0.5);
            transform: scale(1.1);
        }

        .help-close-x:active {
            transform: scale(0.95);
        }

        .help-title {
            font-size: 2em;
            font-weight: 900;
            margin-bottom: 30px;
            color: #fbbf24;
        }

        .help-instructions {
            text-align: left;
            margin-bottom: 30px;
        }

        .help-step {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        .help-step-number {
            font-size: 2em;
            font-weight: 900;
            color: #fbbf24;
            min-width: 50px;
        }

        .help-step-text {
            font-size: 1.1em;
            line-height: 1.5;
        }

        .help-close-btn {
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            color: #000;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 300px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .help-close-btn:hover {
            transform: scale(1.05);
        }

        .help-close-btn:active {
            transform: scale(0.95);
        }

        .help-tap-hint {
            font-size: 0.85em;
            color: #94a3b8;
            margin-top: 20px;
            font-style: italic;
        }

        .help-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 12px;
            color: #fbbf24;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 200;
            font-size: 1.1em;
        }

        .help-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #fbbf24;
        }

        .keyboard-hint {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 0.85em;
            color: #94a3b8;
            z-index: 100;
        }

        .keyboard-hint.hidden {
            display: none;
        }

        @media (max-width: 1200px) {
            .nav-tab {
                font-size: 0.9em;
                padding: 12px 15px;
            }
            
            .nav-arrows {
                display: none;
            }

            .box-detail-modal {
                max-width: 100%;
            }

            .ai-active-button {
                font-size: 0.85em;
                padding: 8px 12px;
            }

            .ai-active-button span {
                display: none;
            }

            .ai-active-button::after {
                content: "AI";
                font-weight: 700;
            }
        }

        @media (max-width: 768px) {
            .overview-mode {
                padding: 15px;
                gap: 15px;
            }

            .overview-header {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }

            .overview-title {
                font-size: 1.5em;
            }

            .ai-active-button {
                font-size: 0.85em;
                padding: 8px 15px;
                width: 100%;
                justify-content: center;
            }

            .critical-alert {
                font-size: 0.85em;
                padding: 8px 15px;
            }

            .section-card {
                padding: 20px;
                min-height: 240px;
            }

            .section-card::after {
                font-size: 0.8em;
                bottom: 10px;
                right: 15px;
            }

            .section-name {
                font-size: 1.8em;
            }

            .priority-badge {
                font-size: 0.85em;
                padding: 8px 12px;
            }

            .stat-value {
                font-size: 1.6em;
            }

            .stat-label {
                font-size: 0.8em;
            }

            .nav-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                padding: 12px;
            }

            .ai-active-button {
                order: -1;
                width: 100%;
                justify-content: center;
            }

            .boxes-grid {
                grid-template-columns: 1fr;
            }

            .detail-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .detail-title {
                font-size: 1.8em;
            }

            .stats-bar {
                flex-wrap: wrap;
                gap: 15px;
            }

            .stat-number {
                font-size: 2em;
            }

            .keyboard-hint {
                display: none;
            }

            .help-toggle {
                top: 10px;
                right: 10px;
                padding: 8px 12px;
                font-size: 0.9em;
            }

            .help-content {
                padding: 25px;
                margin: 15px;
                max-height: 90vh;
                overflow-y: auto;
            }

            .help-title {
                font-size: 1.5em;
                margin-bottom: 20px;
            }

            .help-step {
                flex-direction: column;
                text-align: center;
                padding: 12px;
            }

            .help-step-text {
                font-size: 0.95em;
            }

            .help-close-btn {
                font-size: 1em;
                padding: 12px 30px;
                width: 100%;
            }

            .help-close-x {
                width: 45px;
                height: 45px;
                font-size: 1.8em;
            }

            .box-detail-modal {
                max-width: 100%;
            }

            .guest-info-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                grid-template-columns: 1fr;
            }

            .box-detail-content {
                padding: 20px 15px;
            }

            .revenue-amount {
                font-size: 2em;
            }

            .priority-modal {
                width: 95%;
                padding: 20px;
                max-height: 85vh;
                overflow-y: auto;
            }

            .priority-modal-title {
                font-size: 1.4em;
            }

            .priority-item {
                padding: 15px;
            }

            .priority-item-location {
                font-size: 1em;
            }
        }

        @media (max-height: 700px) {
            .section-card {
                min-height: 220px;
                padding: 20px;
            }

            .section-name {
                font-size: 1.8em;
                margin-bottom: 10px;
            }

            .section-priority {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Help Toggle Button -->
    <button class="help-toggle" onclick="toggleHelp()">❓ Help</button>

    <!-- Priority Alert Modal -->
    <div class="priority-modal-overlay" onclick="closePriorityModal()"></div>
    <div class="priority-modal">
        <div class="priority-modal-header">
            <div class="priority-modal-title">
                <span>🚨</span>
                <span>Priority Alerts</span>
            </div>
            <div class="priority-modal-close" onclick="closePriorityModal()">×</div>
        </div>
        <div class="priority-list">
            <div class="priority-item" onclick="goToPriorityBox('west', 'W3')">
                <div class="priority-item-header">
                    <div class="priority-item-location">West Stand - Box W3</div>
                    <div class="priority-item-badge urgent">URGENT</div>
                </div>
                <div class="priority-item-issue">
                    VIP guest satisfaction declining rapidly. Multiple complaints about champagne temperature and service delays.
                </div>
                <div class="priority-item-action">
                    Click to view details and take action →
                    <span class="priority-item-arrow">→</span>
                </div>
            </div>

            <div class="priority-item attention" onclick="goToPriorityBox('west', 'W2')">
                <div class="priority-item-header">
                    <div class="priority-item-location">West Stand - Box W2</div>
                    <div class="priority-item-badge attention">ATTENTION</div>
                </div>
                <div class="priority-item-issue">
                    Birthday group with pending drink order (12 mins). AI predicts satisfaction may drop if not addressed soon.
                </div>
                <div class="priority-item-action">
                    Click to view details and take action →
                    <span class="priority-item-arrow">→</span>
                </div>
            </div>

            <div class="priority-item attention" onclick="goToPriorityBox('executive', 'E2')">
                <div class="priority-item-header">
                    <div class="priority-item-location">Executive - Exec 2</div>
                    <div class="priority-item-badge attention">ATTENTION</div>
                </div>
                <div class="priority-item-issue">
                    Large group (12 guests) showing mixed sentiment (6:3 ratio). Proactive check-in recommended.
                </div>
                <div class="priority-item-action">
                    Click to view details and take action →
                    <span class="priority-item-arrow">→</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Overlay -->
    <div class="help-overlay">
        <div class="help-content">
            <div class="help-close-x" onclick="closeHelp()">×</div>
            <div class="help-title">📋 Quick Guide</div>
            <div class="help-instructions">
                <div class="help-step">
                    <div class="help-step-number">1</div>
                    <div class="help-step-text">
                        <strong>Click any section card</strong> on the main screen to view detailed box information
                    </div>
                </div>
                <div class="help-step">
                    <div class="help-step-number">2</div>
                    <div class="help-step-text">
                        <strong>AI predictions</strong> appear on boxes showing forecasts, alerts, and recommendations with confidence scores
                    </div>
                </div>
                <div class="help-step">
                    <div class="help-step-number">3</div>
                    <div class="help-step-text">
                        <strong>Click any box</strong> to see complete details: guest info, orders, timeline, AI insights, and quick actions
                    </div>
                </div>
                <div class="help-step">
                    <div class="help-step-number">4</div>
                    <div class="help-step-text">
                        <strong>Click status badges</strong> (like "URGENT" or "Attention") to jump directly to those boxes and highlight them
                    </div>
                </div>
                <div class="help-step">
                    <div class="help-step-number">5</div>
                    <div class="help-step-text">
                        <strong>Use the tabs at the top</strong> to switch between different sections (West Stand, East Stand, etc.)
                    </div>
                </div>
                <div class="help-step">
                    <div class="help-step-number">6</div>
                    <div class="help-step-text">
                        <strong>Click "← Overview"</strong> button to return to the main dashboard at any time
                    </div>
                </div>
                <div class="help-step">
                    <div class="help-step-number">7</div>
                    <div class="help-step-text">
                        <strong>Look for colored boxes:</strong><br>
                        🟢 Green = All good | 🟡 Yellow = Needs attention | 🔴 Red = Urgent<br>
                        🤖 Purple AI badges = Predictive insights active
                    </div>
                </div>
            </div>
            <button class="help-close-btn" onclick="closeHelp()">Got it!</button>
            <div class="help-tap-hint">Tap the X or outside this box to close</div>
        </div>
    </div>

    <!-- Box Detail Modal -->
    <div class="box-detail-overlay" onclick="closeBoxDetail()"></div>
    <div class="box-detail-modal">
        <div class="box-detail-header">
            <div class="box-detail-close" onclick="closeBoxDetail()">×</div>
            <div class="box-detail-title" id="boxDetailTitle">Box W3</div>
            <div class="box-detail-subtitle" id="boxDetailSubtitle">4 guests • Active service</div>
        </div>
        
        <div class="box-detail-content">
            <!-- AI Insights Section -->
            <div class="ai-insights-section" id="aiInsightsSection">
                <div class="ai-section-header">
                    <div class="ai-icon">🤖</div>
                    <div class="ai-section-title">AI Intelligence</div>
                </div>
                
                <div id="aiInsightsContent">
                    <!-- AI insights will be populated here -->
                </div>
            </div>

            <!-- Guest Information -->
            <div class="detail-section">
                <div class="detail-section-title">👥 Guest Information</div>
                <div class="guest-info-grid">
                    <div class="info-item">
                        <div class="info-label">Lead Guest</div>
                        <div class="info-value" id="leadGuest">Sarah Johnson <span class="vip-badge">VIP</span></div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Party Size</div>
                        <div class="info-value" id="partySize">4 guests</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Arrival Time</div>
                        <div class="info-value" id="arrivalTime">2:45 PM</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Staff Assigned</div>
                        <div class="info-value" id="staffAssigned">Marcus R.</div>
                    </div>
                </div>
            </div>

            <!-- Revenue -->
            <div class="detail-section">
                <div class="detail-section-title">💰 Revenue</div>
                <div class="revenue-highlight">
                    <div class="revenue-amount" id="revenueAmount">£1,240</div>
                    <div class="revenue-label">Total Spending Today</div>
                </div>
            </div>

            <!-- Recent Orders -->
            <div class="detail-section">
                <div class="detail-section-title">🍽️ Recent Orders</div>
                <div class="orders-list" id="ordersList">
                    <!-- Orders will be populated here -->
                </div>
            </div>

            <!-- Activity Timeline -->
            <div class="detail-section">
                <div class="detail-section-title">📊 Activity Timeline</div>
                <div class="timeline" id="timeline">
                    <!-- Timeline will be populated here -->
                </div>
            </div>

            <!-- Special Notes -->
            <div class="detail-section">
                <div class="detail-section-title">📝 Special Notes</div>
                <div class="info-item">
                    <div class="info-value" id="specialNotes" style="font-size: 1em; font-weight: 400; color: #cbd5e1; line-height: 1.6;">
                        <!-- Notes will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="detail-section">
                <div class="detail-section-title">⚡ Quick Actions</div>
                <div class="action-buttons">
                    <button class="action-btn primary" onclick="markResolved()">✓ Mark Resolved</button>
                    <button class="action-btn warning" onclick="escalateIssue()">⚠️ Escalate</button>
                    <button class="action-btn secondary" onclick="assignStaff()">👤 Assign Staff</button>
                    <button class="action-btn secondary" onclick="addNote()">📝 Add Note</button>
                </div>
            </div>
        </div>
    </div>

    <!-- OVERVIEW MODE -->
    <div class="overview-mode active">
        <div class="overview-header">
            <div class="overview-title">Mission Control</div>
            <div class="ai-active-button" onclick="showAIStatus()">
                <div class="ai-icon-spin">🤖</div>
                <span>Predictive AI Active</span>
                <div class="ai-status-dot"></div>
            </div>
            <div class="critical-alert" onclick="showPriorityModal()">🚨 3 Areas Need Attention</div>
            <div class="live-badge">LIVE</div>
        </div>

        <div class="sections-overview">
            <div class="section-card has-urgent" onclick="showSection('west')">
                <div class="click-pulse urgent"></div>
                <div>
                    <div class="section-name">West Stand<span class="ai-badge">🤖 AI Active</span></div>
                    <div class="section-priority">
                        <div class="priority-badge urgent" onclick="event.stopPropagation(); showSectionAndFilter('west', 'urgent')">1 URGENT</div>
                        <div class="priority-badge attention" onclick="event.stopPropagation(); showSectionAndFilter('west', 'attention')">2 Attention</div>
                        <div class="priority-badge active" onclick="event.stopPropagation(); showSectionAndFilter('west', 'active')">5 Active</div>
                    </div>
                </div>
                <div class="section-stats">
                    <div class="stat-box">
                        <div class="stat-value urgent-stat">8</div>
                        <div class="stat-label">Total Boxes</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">3.2m</div>
                        <div class="stat-label">Avg Response</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">87%</div>
                        <div class="stat-label">Satisfaction</div>
                    </div>
                </div>
            </div>

            <div class="section-card" onclick="showSection('east')">
                <div class="click-pulse active"></div>
                <div>
                    <div class="section-name">East Stand</div>
                    <div class="section-priority">
                        <div class="priority-badge active" onclick="event.stopPropagation(); showSectionAndFilter('east', 'active')">6 Active</div>
                        <div class="priority-badge" style="background: rgba(255, 255, 255, 0.1);">0 Issues</div>
                    </div>
                </div>
                <div class="section-stats">
                    <div class="stat-box">
                        <div class="stat-value">6</div>
                        <div class="stat-label">Total Boxes</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">1.8m</div>
                        <div class="stat-label">Avg Response</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">98%</div>
                        <div class="stat-label">Satisfaction</div>
                    </div>
                </div>
            </div>

            <div class="section-card" onclick="showSection('executive')">
                <div class="click-pulse attention"></div>
                <div>
                    <div class="section-name">Executive</div>
                    <div class="section-priority">
                        <div class="priority-badge attention" onclick="event.stopPropagation(); showSectionAndFilter('executive', 'attention')">1 Attention</div>
                        <div class="priority-badge active" onclick="event.stopPropagation(); showSectionAndFilter('executive', 'active')">4 Active</div>
                    </div>
                </div>
                <div class="section-stats">
                    <div class="stat-box">
                        <div class="stat-value">5</div>
                        <div class="stat-label">Total Boxes</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">2.5m</div>
                        <div class="stat-label">Avg Response</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">95%</div>
                        <div class="stat-label">Satisfaction</div>
                    </div>
                </div>
            </div>

            <div class="section-card" onclick="showSection('lounge')">
                <div class="click-pulse active"></div>
                <div>
                    <div class="section-name">Lounge</div>
                    <div class="section-priority">
                        <div class="priority-badge active" onclick="event.stopPropagation(); showSectionAndFilter('lounge', 'active')">3 Active</div>
                        <div class="priority-badge" style="background: rgba(255, 255, 255, 0.1);">0 Issues</div>
                    </div>
                </div>
                <div class="section-stats">
                    <div class="stat-box">
                        <div class="stat-value">4</div>
                        <div class="stat-label">Total Tables</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">2.0m</div>
                        <div class="stat-label">Avg Response</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">96%</div>
                        <div class="stat-label">Satisfaction</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DETAIL MODE -->
    <div class="detail-mode">
        <!-- Navigation Bar -->
        <div class="nav-bar">
            <button class="nav-back" onclick="goToOverview()">← Overview</button>
            
            <div class="nav-tabs">
                <div class="nav-tab has-urgent" onclick="showSection('west')">West Stand</div>
                <div class="nav-tab" onclick="showSection('east')">East Stand</div>
                <div class="nav-tab" onclick="showSection('executive')">Executive</div>
                <div class="nav-tab" onclick="showSection('lounge')">Lounge</div>
            </div>

            <div class="ai-active-button" onclick="showAIStatus()">
                <div class="ai-icon-spin">🤖</div>
                <span>AI Active</span>
                <div class="ai-status-dot"></div>
            </div>

            <div class="nav-arrows">
                <button class="nav-arrow" onclick="previousSection()">←</button>
                <button class="nav-arrow" onclick="nextSection()">→</button>
            </div>

            <div class="live-badge">LIVE</div>
        </div>

        <!-- Section Content -->
        <div class="section-wrapper">
            <!-- WEST STAND -->
            <div class="section-content" data-section="west">
                <div class="section-detail">
                    <div class="detail-header">
                        <div class="detail-title">West Stand</div>
                        <div class="detail-status">
                            <div class="status-indicator urgent" onclick="filterCurrentSection('urgent')">1 URGENT</div>
                            <div class="status-indicator attention" onclick="filterCurrentSection('attention')">2 Attention</div>
                            <div class="status-indicator active" onclick="filterCurrentSection('active')">5 Active</div>
                        </div>
                    </div>
                    <div class="boxes-grid">
                        <div class="box-item active" onclick="openBoxDetail('W1')">
                            <div class="box-number">Box W1</div>
                            <div class="box-guests">6 guests</div>
                            <div class="box-status">Active service</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">6</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">3</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">8:1</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item attention" onclick="openBoxDetail('W2')">
                            <div class="ai-prediction-banner">
                                <div class="ai-icon">🤖</div>
                                <div class="ai-prediction-text">AI predicts attention needed in 8 mins</div>
                                <div class="ai-confidence">78%</div>
                            </div>
                            <div class="box-number">Box W2</div>
                            <div class="box-guests">8 guests</div>
                            <div class="box-status">Service request</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">8</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">5</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-neutral">4:2</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item urgent" onclick="openBoxDetail('W3')">
                            <div class="ai-prediction-banner" style="border-color: rgba(239, 68, 68, 0.6); background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.15));">
                                <div class="ai-icon">🤖</div>
                                <div class="ai-prediction-text">CRITICAL: VIP satisfaction declining rapidly</div>
                                <div class="ai-confidence" style="background: rgba(239, 68, 68, 0.3); color: #fca5a5;">94%</div>
                            </div>
                            <div class="box-number">Box W3</div>
                            <div class="box-guests">4 guests</div>
                            <div class="box-status">URGENT - Needs immediate attention</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">4</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">2</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-negative">1:3</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item active" onclick="openBoxDetail('W4')">
                            <div class="ai-prediction-banner" style="border-color: rgba(34, 197, 94, 0.5); background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.1));">
                                <div class="ai-icon">💰</div>
                                <div class="ai-prediction-text">Season ticket upsell opportunity</div>
                                <div class="ai-confidence" style="background: rgba(34, 197, 94, 0.3); color: #86efac;">96%</div>
                            </div>
                            <div class="box-number">Box W4</div>
                            <div class="box-guests">10 guests</div>
                            <div class="box-status">Corporate event</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">10</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">7</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">12:0</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- EAST STAND -->
            <div class="section-content" data-section="east">
                <div class="section-detail">
                    <div class="detail-header">
                        <div class="detail-title">East Stand</div>
                        <div class="detail-status">
                            <div class="status-indicator active" onclick="filterCurrentSection('active')">6 Active</div>
                        </div>
                    </div>
                    <div class="boxes-grid">
                        <div class="box-item active" onclick="openBoxDetail('E1')">
                            <div class="box-number">Box E1</div>
                            <div class="box-guests">12 guests</div>
                            <div class="box-status">VIP package - Premium service</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">12</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">9</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">15:0</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item active">
                            <div class="box-number">Box E2</div>
                            <div class="box-guests">6 guests</div>
                            <div class="box-status">Premium</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">6</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">4</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">7:0</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item active">
                            <div class="box-number">Box E3</div>
                            <div class="box-guests">8 guests</div>
                            <div class="box-status">Halftime</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">8</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">6</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">9:1</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- EXECUTIVE -->
            <div class="section-content" data-section="executive">
                <div class="section-detail">
                    <div class="detail-header">
                        <div class="detail-title">Executive Suites</div>
                        <div class="detail-status">
                            <div class="status-indicator attention" onclick="filterCurrentSection('attention')">1 Attention</div>
                            <div class="status-indicator active" onclick="filterCurrentSection('active')">4 Active</div>
                        </div>
                    </div>
                    <div class="boxes-grid">
                        <div class="box-item active">
                            <div class="box-number">Exec 1</div>
                            <div class="box-guests">15 guests</div>
                            <div class="box-status">Full VIP</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">15</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">11</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">18:1</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item attention" onclick="openBoxDetail('E2')">
                            <div class="box-number">Exec 2</div>
                            <div class="box-guests">12 guests</div>
                            <div class="box-status">Check needed</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">12</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">8</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-neutral">6:3</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item active">
                            <div class="box-number">Exec 3</div>
                            <div class="box-guests">8 guests</div>
                            <div class="box-status">Premium</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">8</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">5</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">10:0</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LOUNGE -->
            <div class="section-content" data-section="lounge">
                <div class="section-detail">
                    <div class="detail-header">
                        <div class="detail-title">Premium Lounge</div>
                        <div class="detail-status">
                            <div class="status-indicator active" onclick="filterCurrentSection('active')">3 Active</div>
                        </div>
                    </div>
                    <div class="boxes-grid">
                        <div class="box-item active">
                            <div class="box-number">Table 1</div>
                            <div class="box-guests">4 guests</div>
                            <div class="box-status">Drinks</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">4</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">2</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">5:0</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                        <div class="box-item active">
                            <div class="box-number">Table 2</div>
                            <div class="box-guests">6 guests</div>
                            <div class="box-status">Food ordered</div>
                            <div class="box-metrics">
                                <div class="metric-item">
                                    <div class="metric-value guests-count">6</div>
                                    <div class="metric-label">Guests</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value orders-count">4</div>
                                    <div class="metric-label">Orders</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-value sentiment-positive">8:0</div>
                                    <div class="metric-label">+/- Actions</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-number">28</div>
                <div class="stat-label">Active Boxes</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">2.3m</div>
                <div class="stat-label">Avg Response</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">94%</div>
                <div class="stat-label">Satisfaction</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">47</div>
                <div class="stat-label">Requests Handled</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">3</div>
                <div class="stat-label">Need Attention</div>
            </div>
        </div>
    </div>

    <!-- Keyboard Hints -->
    <div class="keyboard-hint">
        💡 Use ← → arrows or 1-4 keys to navigate | ESC for overview
    </div>

    <script>
        const sections = ['west', 'east', 'executive', 'lounge'];
        let currentSection = 0;

        // Box detail data with AI
        const boxData = {
            'W1': {
                title: 'Box W1',
                subtitle: '6 guests • Active service',
                leadGuest: 'Michael Chen',
                vip: true,
                partySize: 6,
                arrivalTime: '2:30 PM',
                staff: 'Sophie M.',
                revenue: '£2,150',
                orders: [
                    { name: 'Premium Wine Selection', time: '3:25 PM', status: 'completed' },
                    { name: 'Gourmet Platter', time: '3:00 PM', status: 'completed' },
                    { name: 'Coffee & Desserts', time: '4:10 PM', status: 'pending' }
                ],
                timeline: [
                    { time: '3:40 PM', text: 'Requested extra napkins', type: 'positive' },
                    { time: '3:25 PM', text: 'Praised food presentation', type: 'positive' },
                    { time: '2:50 PM', text: 'Quick service response time noted', type: 'positive' },
                    { time: '2:30 PM', text: 'Guests welcomed and seated', type: 'positive' }
                ],
                notes: '• Corporate client (quarterly visits)\n• Prefers quiet atmosphere\n• High-value spending pattern\n• Contact: michael.chen@company.com',
                ai: {
                    predictions: [
                        {
                            type: 'Revenue Forecast',
                            message: 'Based on ordering patterns, this box is trending toward £3,200+ total spend today',
                            confidence: 89,
                            recommendation: 'Suggest premium dessert wine to maximize satisfaction and revenue'
                        },
                        {
                            type: 'Service Timing',
                            message: 'Guests typically request next service in 18-22 minutes after current order',
                            confidence: 92,
                            recommendation: 'Proactively check in at 4:28 PM'
                        }
                    ],
                    sentiment: { trend: 'up', text: 'Satisfaction increasing throughout visit' },
                    risk: { level: 'low', score: 15 }
                }
            },
            'W2': {
                title: 'Box W2',
                subtitle: '8 guests • Service request pending',
                leadGuest: 'Emma Williams',
                vip: false,
                partySize: 8,
                arrivalTime: '1:45 PM',
                staff: 'James T.',
                revenue: '£1,890',
                orders: [
                    { name: 'Cocktail Selection', time: '2:30 PM', status: 'completed' },
                    { name: 'Sharing Platters', time: '2:15 PM', status: 'completed' },
                    { name: 'Additional Drinks', time: '3:50 PM', status: 'pending' }
                ],
                timeline: [
                    { time: '3:50 PM', text: 'Service request for additional drinks', type: 'positive' },
                    { time: '3:20 PM', text: 'Slow drink service noted', type: 'negative' },
                    { time: '2:35 PM', text: 'Appreciated cocktail recommendations', type: 'positive' },
                    { time: '1:45 PM', text: 'Large group arrived energetic', type: 'positive' }
                ],
                notes: '• Birthday celebration group\n• High energy, social atmosphere\n• One guest requested gluten-free options\n• Multiple drink orders expected',
                ai: {
                    predictions: [
                        {
                            type: 'Attention Alert',
                            message: 'Pending drink order from 12 minutes ago. Group energy may decline if not delivered soon',
                            confidence: 78,
                            recommendation: 'Prioritize drink delivery within next 5 minutes and offer complimentary appetizer for delay'
                        },
                        {
                            type: 'Upsell Opportunity',
                            message: 'Birthday groups typically order celebration packages. 85% conversion rate when suggested',
                            confidence: 85,
                            recommendation: 'Offer birthday cake and champagne package (£180)'
                        }
                    ],
                    sentiment: { trend: 'stable', text: 'Satisfaction stable but at risk due to service delay' },
                    risk: { level: 'medium', score: 55 }
                }
            },
            'W3': {
                title: 'Box W3',
                subtitle: '4 guests • URGENT attention needed',
                leadGuest: 'Sarah Johnson',
                vip: true,
                partySize: 4,
                arrivalTime: '2:45 PM',
                staff: 'Marcus R.',
                revenue: '£1,240',
                orders: [
                    { name: 'Champagne (Dom Pérignon)', time: '3:12 PM', status: 'completed' },
                    { name: 'Canapé Selection', time: '2:55 PM', status: 'completed' },
                    { name: 'Additional Glasses', time: '3:45 PM', status: 'pending' }
                ],
                timeline: [
                    { time: '3:45 PM', text: 'Champagne refill delayed', type: 'negative' },
                    { time: '3:30 PM', text: 'Guest complimented service quality', type: 'positive' },
                    { time: '3:15 PM', text: 'Complaint: Champagne temperature not ideal', type: 'negative' },
                    { time: '2:58 PM', text: 'Requested staff by name (repeat visit)', type: 'positive' },
                    { time: '2:45 PM', text: 'VIP guests arrived and greeted', type: 'positive' }
                ],
                notes: '• Regular VIP guest (8th visit this season)\n• Prefers champagne at 6°C\n• Dietary: One guest vegetarian\n• Birthday celebration today 🎂\n• High expectations - premium service required',
                ai: {
                    predictions: [
                        {
                            type: 'CRITICAL ALERT',
                            message: 'Multiple negative interactions detected. VIP guest satisfaction declining rapidly. Risk of losing repeat customer',
                            confidence: 94,
                            recommendation: 'IMMEDIATE ACTION: Manager should visit table, offer complimentary champagne bottle, and personally apologize'
                        },
                        {
                            type: 'Recovery Strategy',
                            message: 'VIP guests respond well to personalized gestures. Birthday noted in profile',
                            confidence: 88,
                            recommendation: 'Send complimentary birthday dessert with sparkler and handwritten card from management'
                        },
                        {
                            type: 'Staff Alert',
                            message: 'Marcus R. currently handling 3 boxes. Response time degraded by 40%',
                            confidence: 91,
                            recommendation: 'Assign backup staff (Sophie M. available) to support this VIP table immediately'
                        }
                    ],
                    sentiment: { trend: 'down', text: 'Satisfaction declining - immediate intervention required' },
                    risk: { level: 'high', score: 87 }
                }
            },
            'W4': {
                title: 'Box W4',
                subtitle: '10 guests • Corporate event',
                leadGuest: 'David Thompson',
                vip: true,
                partySize: 10,
                arrivalTime: '1:30 PM',
                staff: 'Alexandra P.',
                revenue: '£3,450',
                orders: [
                    { name: 'Premium Champagne Package', time: '2:00 PM', status: 'completed' },
                    { name: 'Executive Lunch Menu', time: '1:45 PM', status: 'completed' },
                    { name: 'Afternoon Tea Service', time: '3:30 PM', status: 'completed' }
                ],
                timeline: [
                    { time: '3:45 PM', text: 'Excellent feedback on food quality', type: 'positive' },
                    { time: '3:20 PM', text: 'Requested business cards from chef', type: 'positive' },
                    { time: '2:15 PM', text: 'All guests extremely satisfied', type: 'positive' },
                    { time: '1:30 PM', text: 'Corporate group welcomed warmly', type: 'positive' }
                ],
                notes: '• Fortune 500 company executives\n• Potential for season ticket renewal\n• All dietary requirements met\n• Requested invoice for accounting\n• Next booking: tentative for next month',
                ai: {
                    predictions: [
                        {
                            type: 'Season Ticket Opportunity',
                            message: 'Corporate satisfaction extremely high (98%). Optimal time to present season ticket package',
                            confidence: 96,
                            recommendation: 'Have sales manager visit with executive suite brochure before departure'
                        },
                        {
                            type: 'Revenue Optimization',
                            message: 'Group spending 40% above average. High probability of post-match drinks order',
                            confidence: 82,
                            recommendation: 'Offer premium whisky tasting experience for after the match (£450)'
                        }
                    ],
                    sentiment: { trend: 'up', text: 'Exceptional satisfaction - perfect for upsell opportunities' },
                    risk: { level: 'low', score: 8 }
                }
            },
            'E1': {
                title: 'Box E1',
                subtitle: '12 guests • VIP package',
                leadGuest: 'James Anderson',
                vip: true,
                partySize: 12,
                arrivalTime: '2:00 PM',
                staff: 'Oliver K.',
                revenue: '£4,200',
                orders: [
                    { name: 'VIP Champagne Experience', time: '2:30 PM', status: 'completed' },
                    { name: 'Premium Seafood Platter', time: '3:00 PM', status: 'completed' },
                    { name: 'Dessert Selection', time: '4:00 PM', status: 'completed' }
                ],
                timeline: [
                    { time: '4:15 PM', text: 'Guests praised exceptional service', type: 'positive' },
                    { time: '3:45 PM', text: 'Group photo taken with staff', type: 'positive' },
                    { time: '3:10 PM', text: 'Complimented food presentation', type: 'positive' },
                    { time: '2:00 PM', text: 'VIP arrival greeted by manager', type: 'positive' }
                ],
                notes: '• Season ticket holders (5 years)\n• Anniversary celebration\n• High-profile business guests\n• Prefer personalized service\n• Already booked 3 more dates this season',
                ai: {
                    predictions: [
                        {
                            type: 'Loyalty Enhancement',
                            message: 'Anniversary celebration detected. Opportunity to create memorable moment for long-term loyalty',
                            confidence: 93,
                            recommendation: 'Send complimentary anniversary champagne with personalized message'
                        },
                        {
                            type: 'Revenue Forecast',
                            message: 'Spending trajectory suggests £5,500+ final total. Top 5% of all boxes today',
                            confidence: 89,
                            recommendation: 'Maintain exceptional service level. Consider offering exclusive club membership'
                        }
                    ],
                    sentiment: { trend: 'up', text: 'Outstanding satisfaction - model service experience' },
                    risk: { level: 'low', score: 5 }
                }
            },
            'E2': {
                title: 'Exec 2',
                subtitle: '12 guests • Check needed',
                leadGuest: 'Patricia Williams',
                vip: false,
                partySize: 12,
                arrivalTime: '2:15 PM',
                staff: 'Robert K.',
                revenue: '£2,780',
                orders: [
                    { name: 'Premium Drinks Package', time: '2:45 PM', status: 'completed' },
                    { name: 'Lunch Selection', time: '2:30 PM', status: 'completed' },
                    { name: 'Additional Beverages', time: '3:40 PM', status: 'pending' }
                ],
                timeline: [
                    { time: '3:40 PM', text: 'Service delay on beverage order', type: 'negative' },
                    { time: '3:15 PM', text: 'Group requested quieter area', type: 'negative' },
                    { time: '2:50 PM', text: 'Enjoyed lunch presentation', type: 'positive' },
                    { time: '2:30 PM', text: 'One guest complained about seating', type: 'negative' },
                    { time: '2:15 PM', text: 'Large corporate group arrived', type: 'positive' }
                ],
                notes: '• Corporate team building event\n• Mixed feedback on arrangements\n• Some noise complaints from group\n• Large spending potential if experience improves',
                ai: {
                    predictions: [
                        {
                            type: 'Service Recovery',
                            message: 'Mixed sentiment (6:3 ratio) indicates experience not meeting expectations. Immediate check-in needed',
                            confidence: 81,
                            recommendation: 'Send senior staff member to address concerns and offer complimentary upgrade'
                        },
                        {
                            type: 'Retention Risk',
                            message: 'Corporate group showing signs of dissatisfaction. Risk of negative review and lost future bookings',
                            confidence: 73,
                            recommendation: 'Proactive manager visit with personalized attention and special amenity'
                        }
                    ],
                    sentiment: { trend: 'stable', text: 'Satisfaction mixed - requires attention to prevent decline' },
                    risk: { level: 'medium', score: 58 }
                }
            }
        };

        // Open box detail
        function openBoxDetail(boxId) {
            const data = boxData[boxId] || boxData['W3'];
            
            document.getElementById('boxDetailTitle').innerHTML = data.title;
            document.getElementById('boxDetailSubtitle').textContent = data.subtitle;
            document.getElementById('leadGuest').innerHTML = data.leadGuest + (data.vip ? ' <span class="vip-badge">VIP</span>' : '');
            document.getElementById('partySize').textContent = data.partySize + ' guests';
            document.getElementById('arrivalTime').textContent = data.arrivalTime;
            document.getElementById('staffAssigned').textContent = data.staff;
            document.getElementById('revenueAmount').textContent = data.revenue;
            
            // Populate AI Insights
            const aiContent = document.getElementById('aiInsightsContent');
            if (data.ai) {
                let aiHTML = '';
                
                // AI Predictions
                data.ai.predictions.forEach(pred => {
                    aiHTML += `
                        <div class="ai-insight-card">
                            <div class="ai-insight-header">
                                <div class="ai-insight-type">${pred.type}</div>
                                <div class="ai-insight-score">
                                    <div class="confidence-bar">
                                        <div class="confidence-fill" style="width: ${pred.confidence}%"></div>
                                    </div>
                                    <span class="confidence-text">${pred.confidence}%</span>
                                </div>
                            </div>
                            <div class="ai-insight-message">${pred.message}</div>
                            ${pred.recommendation ? `
                                <div class="ai-recommendation">
                                    <div class="ai-recommendation-icon">💡</div>
                                    <div class="ai-recommendation-text">${pred.recommendation}</div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                // Sentiment Trend
                const trendIcon = data.ai.sentiment.trend === 'up' ? '↗' : 
                                 data.ai.sentiment.trend === 'down' ? '↘' : '→';
                const trendClass = data.ai.sentiment.trend === 'up' ? 'trend-up' : 
                                  data.ai.sentiment.trend === 'down' ? 'trend-down' : 'trend-stable';
                
                aiHTML += `
                    <div class="sentiment-trend">
                        <div class="trend-arrow ${trendClass}">${trendIcon}</div>
                        <div class="trend-text">${data.ai.sentiment.text}</div>
                    </div>
                `;
                
                // Risk Meter
                const riskClass = data.ai.risk.level === 'low' ? 'risk-low' : 
                                 data.ai.risk.level === 'medium' ? 'risk-medium' : 'risk-high';
                const riskLabel = data.ai.risk.level === 'low' ? 'Low Risk' : 
                                 data.ai.risk.level === 'medium' ? 'Medium Risk' : 'High Risk';
                
                aiHTML += `
                    <div class="risk-meter ${riskClass}">
                        <div class="risk-label">${riskLabel}</div>
                        <div class="risk-meter-bar">
                            <div class="risk-meter-fill"></div>
                        </div>
                        <div class="confidence-text">${data.ai.risk.score}%</div>
                    </div>
                `;
                
                aiContent.innerHTML = aiHTML;
            }
            
            // Populate orders
            const ordersList = document.getElementById('ordersList');
            ordersList.innerHTML = data.orders.map(order => `
                <div class="order-item">
                    <div>
                        <div class="order-name">${order.name}</div>
                        <div class="order-time">${order.time}</div>
                    </div>
                    <div class="order-status ${order.status}">${order.status === 'completed' ? 'Delivered' : 'Pending'}</div>
                </div>
            `).join('');
            
            // Populate timeline
            const timeline = document.getElementById('timeline');
            timeline.innerHTML = data.timeline.map(item => `
                <div class="timeline-item ${item.type}">
                    <div class="timeline-time">${item.time}</div>
                    <div class="timeline-text">
                        ${item.text}
                        <span class="timeline-type ${item.type}">${item.type === 'positive' ? 'Positive' : 'Negative'}</span>
                    </div>
                </div>
            `).join('');

            // Populate notes
            document.getElementById('specialNotes').innerHTML = data.notes.replace(/\n/g, '<br>');
            
            // Show modal
            document.querySelector('.box-detail-modal').classList.add('active');
            document.querySelector('.box-detail-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Close box detail
        function closeBoxDetail() {
            document.querySelector('.box-detail-modal').classList.remove('active');
            document.querySelector('.box-detail-overlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Action button functions
        function markResolved() {
            alert('✓ Issue marked as resolved! The box status will be updated.');
            closeBoxDetail();
        }

        function escalateIssue() {
            alert('⚠️ Issue escalated to senior manager. Notification sent.');
        }

        function assignStaff() {
            alert('👤 Staff assignment panel would open here.');
        }

        function addNote() {
            const note = prompt('📝 Add a note about this box:');
            if (note) {
                alert('Note saved: ' + note);
            }
        }

        // Show AI Status
        function showAIStatus() {
            const status = `🤖 AI PREDICTIVE INTELLIGENCE

✅ Currently Active:
• Monitoring 28 active boxes in real-time
• Analyzing sentiment patterns across all guests
• Predicting service needs 15-20 minutes ahead
• Detecting staff workload imbalances
• Identifying upsell opportunities

📊 AI Insights Generated:
• 4 predictions with 78-96% confidence
• 3 critical alerts identified
• 2 revenue optimization opportunities
• 1 staff reallocation recommendation

🔮 Next Analysis: 30 seconds

The AI is continuously learning from guest interactions and will alert you to any changes in real-time.`;
            
            alert(status);
        }

        // Priority Modal Functions
        function showPriorityModal() {
            document.querySelector('.priority-modal').classList.add('active');
            document.querySelector('.priority-modal-overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePriorityModal() {
            document.querySelector('.priority-modal').classList.remove('active');
            document.querySelector('.priority-modal-overlay').classList.remove('active');
            document.body.style.overflow = '';
        }

        function goToPriorityBox(sectionName, boxId) {
            closePriorityModal();
            
            // Navigate to section
            showSection(sectionName);
            
            // Wait for section to load, then open box detail
            setTimeout(() => {
                openBoxDetail(boxId);
            }, 300);
        }

        // Help overlay functions
        function toggleHelp() {
            const overlay = document.querySelector('.help-overlay');
            overlay.classList.toggle('hidden');
        }

        function closeHelp() {
            document.querySelector('.help-overlay').classList.add('hidden');
            localStorage.setItem('helpSeen', 'true');
        }

        // Close help when clicking outside
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.querySelector('.help-overlay');
            const content = document.querySelector('.help-content');
            
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeHelp();
                }
            });
            
            content.addEventListener('click', (e) => {
                e.stopPropagation();
            });
        });

        // Show help on first visit
        window.addEventListener('load', () => {
            if (!localStorage.getItem('helpSeen')) {
                setTimeout(() => {
                    document.querySelector('.help-overlay').classList.remove('hidden');
                }, 1000);
            } else {
                document.querySelector('.help-overlay').classList.add('hidden');
            }
        });

        function showSection(sectionName) {
            closeHelp();
            
            document.querySelector('.overview-mode').classList.remove('active');
            document.querySelector('.detail-mode').classList.add('active');
            
            currentSection = sections.indexOf(sectionName);
            
            document.querySelectorAll('.section-content').forEach(s => {
                s.classList.remove('active');
            });
            
            document.querySelector(`.section-content[data-section="${sectionName}"]`).classList.add('active');
            
            document.querySelectorAll('.nav-tab').forEach((tab, index) => {
                tab.classList.toggle('active', sections[index] === sectionName);
            });
            
            document.querySelectorAll('.box-item').forEach(box => {
                box.classList.remove('highlighted');
            });
            
            updateArrows();
        }

        function showSectionAndFilter(sectionName, filterType) {
            showSection(sectionName);
            
            setTimeout(() => {
                const currentSectionElement = document.querySelector(`.section-content[data-section="${sectionName}"]`);
                const boxes = currentSectionElement.querySelectorAll('.box-item');
                
                boxes.forEach(box => {
                    if (box.classList.contains(filterType)) {
                        box.classList.add('highlighted');
                        
                        if (!currentSectionElement.querySelector('.highlighted:first-of-type').scrolledIntoView) {
                            box.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            box.scrolledIntoView = true;
                        }
                    }
                });
                
                setTimeout(() => {
                    boxes.forEach(box => box.classList.remove('highlighted'));
                }, 5000);
            }, 100);
        }

        function filterCurrentSection(filterType) {
            const currentSectionElement = document.querySelector('.section-content.active');
            if (!currentSectionElement) return;
            
            const boxes = currentSectionElement.querySelectorAll('.box-item');
            
            boxes.forEach(box => box.classList.remove('highlighted'));
            
            let firstMatch = true;
            boxes.forEach(box => {
                if (box.classList.contains(filterType)) {
                    box.classList.add('highlighted');
                    
                    if (firstMatch) {
                        box.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        firstMatch = false;
                    }
                }
            });
            
            setTimeout(() => {
                boxes.forEach(box => box.classList.remove('highlighted'));
            }, 5000);
        }

        function goToOverview() {
            document.querySelector('.detail-mode').classList.remove('active');
            document.querySelector('.overview-mode').classList.add('active');
        }

        function nextSection() {
            if (currentSection < sections.length - 1) {
                currentSection++;
                showSection(sections[currentSection]);
            }
        }

        function previousSection() {
            if (currentSection > 0) {
                currentSection--;
                showSection(sections[currentSection]);
            }
        }

        function updateArrows() {
            const prevBtn = document.querySelectorAll('.nav-arrow')[0];
            const nextBtn = document.querySelectorAll('.nav-arrow')[1];
            
            if (prevBtn) prevBtn.classList.toggle('disabled', currentSection === 0);
            if (nextBtn) nextBtn.classList.toggle('disabled', currentSection === sections.length - 1);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            const detailActive = document.querySelector('.detail-mode').classList.contains('active');
            const helpActive = !document.querySelector('.help-overlay').classList.contains('hidden');
            
            if (helpActive && e.key === 'Escape') {
                closeHelp();
            } else if (e.key === 'Escape') {
                goToOverview();
            } else if (detailActive && !helpActive) {
                if (e.key === 'ArrowLeft') {
                    previousSection();
                } else if (e.key === 'ArrowRight') {
                    nextSection();
                } else if (e.key >= '1' && e.key <= '4') {
                    showSection(sections[parseInt(e.key) - 1]);
                }
            }
        });

        // Simulate real-time updates
        setInterval(() => {
            const boxes = document.querySelectorAll('.box-item');
            boxes.forEach(box => {
                if (Math.random() > 0.95) {
                    const classes = ['', 'active', 'attention'];
                    const randomClass = classes[Math.floor(Math.random() * classes.length)];
                    box.className = `box-item ${randomClass}`;
                }
            });
        }, 3000);

        // Hide keyboard hint after 10 seconds
        setTimeout(() => {
            document.querySelector('.keyboard-hint').classList.add('hidden');
        }, 10000);
    </script>
</body>
</html>
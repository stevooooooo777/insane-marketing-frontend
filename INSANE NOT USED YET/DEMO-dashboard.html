<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ SME Business Intelligence Dashboard</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #111827;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
            min-height: 100vh;
        }

        .header {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 32px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-brand h1 {
            font-size: 1.75rem;
            font-weight: bold;
            color: #111827;
        }

        .company-info {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .plan-badge {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .plan-badge.professional {
            background: #dbeafe;
            color: #1e40af;
        }

        .plan-badge.enterprise {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .user-menu {
            position: relative;
            display: inline-block;
        }

        .user-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border: none;
            background: #f3f4f6;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .user-button:hover {
            background: #e5e7eb;
        }

        .user-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 8px 0;
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .user-dropdown.show {
            display: block;
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            color: #374151;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s;
        }

        .dropdown-item:hover {
            background: #f3f4f6;
        }

        .dropdown-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 8px 0;
        }





/* Add these styles to your existing dashboard CSS */

/* Intelligence Hub Tabs */
.intelligence-tabs {
    display: flex;
    gap: 5px;
    margin-bottom: 20px;
    background: #f1f5f9;
    padding: 5px;
    border-radius: 10px;
    overflow-x: auto;
}

.intel-tab {
    padding: 12px 20px;
    border: none;
    background: transparent;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    color: #64748b;
    transition: all 0.3s;
    white-space: nowrap;
}

.intel-tab.active {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    color: white;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.intel-tab:hover:not(.active) {
    background: #e2e8f0;
    color: #475569;
}

/* Intelligence Content Panels */
.intel-content {
    display: none;
    animation: fadeIn 0.3s ease-in-out;
}

.intel-content.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Insight Items */
.integrated-insight {
    background: white;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 12px;
    border-left: 3px solid #22c55e;
    transition: all 0.3s;
    cursor: pointer;
}

.integrated-insight:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
}

.integrated-insight.warning {
    border-left-color: #f59e0b;
}

.integrated-insight.critical {
    border-left-color: #ef4444;
}

.integrated-insight.menu-ai {
    border-left-color: #8b5cf6;
}

.insight-header {
    font-weight: 600;
    color: #111827;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.95em;
}

.insight-body {
    color: #4b5563;
    font-size: 0.85em;
    margin-bottom: 8px;
    line-height: 1.4;
}

.insight-impact {
    background: #f0fdf4;
    color: #15803d;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: 500;
}

.insight-impact.profit {
    background: #fef3c7;
    color: #92400e;
}

.insight-impact.savings {
    background: #dbeafe;
    color: #1e40af;
}

/* Menu Performance Items */
.menu-item-performance {
    background: white;
    padding: 12px;
    border-radius: 6px;
    margin-bottom: 10px;
    border: 1px solid #e5e7eb;
    transition: all 0.3s;
}

.menu-item-performance:hover {
    border-color: #8b5cf6;
    transform: translateY(-1px);
}

.menu-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.menu-item-name {
    font-weight: 600;
    color: #111827;
    font-size: 0.9em;
}

.menu-performance-badge {
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.75em;
    font-weight: 500;
}

.performance-excellent {
    background: #d1fae5;
    color: #065f46;
}

.performance-good {
    background: #dbeafe;
    color: #1e40af;
}

.performance-poor {
    background: #fee2e2;
    color: #991b1b;
}

.menu-item-stats {
    display: flex;
    gap: 15px;
    font-size: 0.8em;
    color: #6b7280;
}

/* Priority Actions */
.priority-action {
    background: white;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 12px;
    border-left: 4px solid #3b82f6;
    transition: all 0.3s;
    cursor: pointer;
}

.priority-action:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
}

.priority-action.high {
    border-left-color: #ef4444;
}

.priority-action.medium {
    border-left-color: #f59e0b;
}

.action-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.action-title {
    font-weight: 600;
    color: #111827;
    font-size: 0.95em;
}

.action-priority {
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.7em;
    font-weight: 600;
    text-transform: uppercase;
}

.priority-high {
    background: #fee2e2;
    color: #991b1b;
}

.priority-medium {
    background: #fef3c7;
    color: #92400e;
}

.priority-low {
    background: #dbeafe;
    color: #1e40af;
}

.action-description {
    color: #4b5563;
    font-size: 0.85em;
    margin-bottom: 8px;
    line-height: 1.4;
}

.action-roi {
    background: #f0fdf4;
    color: #15803d;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 0.8em;
    font-weight: 500;
    text-align: center;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .intelligence-tabs {
        flex-direction: column;
    }
    
    .intel-tab {
        text-align: center;
    }
    
    .recommendations div[style*="grid-template-columns: 1fr 1fr"] {
        grid-template-columns: 1fr !important;
    }
}









        /* SME SUCCESS CELEBRATIONS */
        .success-banner {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 24px;
            animation: slideInDown 0.6s ease-out;
        }

        @keyframes slideInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .success-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .success-icon {
            font-size: 2.5em;
        }

        .success-text h3 {
            font-size: 1.4em;
            margin-bottom: 8px;
        }

        .success-text p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        /* ROI TRACKER */
        .roi-tracker {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            text-align: center;
        }

        .roi-amount {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .roi-subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* ACHIEVEMENT SYSTEM */
        .achievements {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding: 8px 0;
        }

        .achievement {
            background: white;
            border-radius: 12px;
            padding: 16px;
            min-width: 200px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .achievement.unlocked {
            border-color: #00b894;
            background: linear-gradient(135deg, #e8f5e8, #f0fdf4);
        }

        .achievement.locked {
            opacity: 0.6;
        }

        .achievement-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .achievement-title {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .achievement-desc {
            font-size: 12px;
            color: #666;
        }

        .filters {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: #2563eb;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: #f3f4f6;
            color: #374151;
        }

        .btn-secondary:hover {
            background-color: #e5e7eb;
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
        }

        .btn-pack {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            padding: 24px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .stat-card.success {
            border-color: #00b894;
            background: linear-gradient(135deg, #e8f5e8, #f0fdf4);
        }

        .stat-card.warning {
            border-color: #f59e0b;
            background: linear-gradient(135deg, #fef3c7, #fffbeb);
        }

        .stat-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-card-content h3 {
            font-size: 14px;
            font-weight: 500;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .stat-card-content .value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #111827;
            margin-bottom: 4px;
        }

        .stat-card-content .change {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .change.positive {
            color: #059669;
        }

        .change.negative {
            color: #dc2626;
        }

        .stat-icon {
            padding: 12px;
            background-color: #eff6ff;
            border-radius: 8px;
        }

        .stat-icon i {
            width: 24px;
            height: 24px;
            color: #2563eb;
        }

        /* SMART RECOMMENDATIONS */
        .recommendations {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            border-left: 4px solid #74b9ff;
        }

        .recommendations h3 {
            color: #2563eb;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .recommendation-item {
            background: #f8fafc;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 3px solid #00b894;
        }

        .recommendation-item:last-child {
            margin-bottom: 0;
        }

        .recommendation-title {
            font-weight: 600;
            color: #111827;
            margin-bottom: 4px;
        }

        .recommendation-desc {
            color: #6b7280;
            font-size: 14px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .chart-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            padding: 24px;
            transition: all 0.3s;
        }

        .chart-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .chart-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .full-width-chart {
            grid-column: 1 / -1;
        }

        /* PACK PERFORMANCE SECTION */
        .pack-performance {
            background: white;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
        }

        .pack-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .pack-card {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s;
        }

        .pack-card:hover {
            border-color: #74b9ff;
            transform: translateY(-2px);
        }

        .pack-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .pack-icon {
            font-size: 2em;
        }

        .pack-title {
            font-size: 1.2em;
            font-weight: bold;
        }

        .pack-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .pack-stat {
            text-align: center;
            padding: 8px;
            background: white;
            border-radius: 6px;
        }

        .pack-stat-value {
            font-size: 1.4em;
            font-weight: bold;
            color: #2563eb;
        }

        .pack-stat-label {
            font-size: 12px;
            color: #6b7280;
        }

        .tables-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .table-card {
            background: white;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            padding: 24px;
        }

        .table-card h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 16px;
        }

        .data-table {
            width: 100%;
            font-size: 14px;
        }

        .data-table th {
            text-align: left;
            padding: 12px 0;
            font-weight: 500;
            color: #374151;
            border-bottom: 1px solid #e5e7eb;
        }

        .data-table td {
            padding: 12px 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .qr-name {
            font-weight: 500;
            color: #111827;
        }

        .qr-id {
            font-size: 12px;
            color: #6b7280;
        }

        .badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-success {
            background-color: #d1fae5;
            color: #065f46;
        }

        .badge-warning {
            background-color: #fef3c7;
            color: #92400e;
        }

        .badge-info {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .realtime-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .realtime-toggle.active {
            background-color: #d1fae5;
            color: #065f46;
        }

        .realtime-toggle.inactive {
            background-color: #f3f4f6;
            color: #374151;
        }

        .spinning {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .header-top {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }

            .filters {
                flex-direction: column;
                align-items: flex-start;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .tables-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 250px;
            }

            .achievements {
                flex-direction: column;
            }

            .achievement {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SUCCESS CELEBRATION BANNER -->
        <div class="success-banner" id="successBanner" style="display: none;">
            <div class="success-content">
                <div class="success-icon">üéâ</div>
                <div class="success-text">
                    <h3 id="successTitle">Congratulations!</h3>
                    <p id="successMessage">You've just achieved a new milestone!</p>
                </div>
            </div>
        </div>

        <!-- ROI SAVINGS TRACKER -->
        <div class="roi-tracker">
            <div class="roi-amount" id="totalSavings">¬£12,847</div>
            <div class="roi-subtitle">You've saved vs expensive agencies! üí∞</div>
        </div>

<!-- ACHIEVEMENT SYSTEM 
        <div class="achievements">
            <div class="achievement unlocked">
                <div class="achievement-icon">üöÄ</div>
                <div class="achievement-title">First QR Code</div>
                <div class="achievement-desc">Created your first QR code</div>
            </div>
            <div class="achievement unlocked">
                <div class="achievement-icon">üìà</div>
                <div class="achievement-title">100 Scans</div>
                <div class="achievement-desc">Reached 100 total scans</div>
            </div>
            <div class="achievement unlocked">
                <div class="achievement-icon">üéØ</div>
                <div class="achievement-title">Pack Master</div>
                <div class="achievement-desc">Used 3 different packs</div>
            </div>
            <div class="achievement locked">
                <div class="achievement-icon">üèÜ</div>
                <div class="achievement-title">QR Legend</div>
                <div class="achievement-desc">Reach 1,000 scans</div>
            </div>
        </div>
-->
        <!-- Header with User Info -->
        <div class="header">
            <div class="header-top">
                <div class="header-brand">
                    <h1>üìä Your Business Intelligence</h1>
                    <div class="company-info" id="companyInfo">
                        Mario's Italian Kitchen
                    </div>
                </div>
                <div class="user-info">
                    <span class="plan-badge professional" id="planBadge">Professional</span>
                    <div class="user-menu">
                        <button class="user-button" onclick="toggleUserMenu()">
                            <i data-lucide="user"></i>
                            <span id="userName">Mario Rossi</span>
                            <i data-lucide="chevron-down"></i>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="#" class="dropdown-item">
                                <i data-lucide="user"></i>
                                Account Settings
                            </a>
                            <a href="#" class="dropdown-item">
                                <i data-lucide="credit-card"></i>
                                Billing & Plans
                            </a>
                            <a href="#" class="dropdown-item">
                                <i data-lucide="users"></i>
                                Team Management
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i data-lucide="help-circle"></i>
                                Help & Support
                            </a>
                            <a href="#" class="dropdown-item" onclick="logout()">
                                <i data-lucide="log-out"></i>
                                Sign Out
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SMART RECOMMENDATIONS -->



<!-- ENHANCED SMART RECOMMENDATIONS SECTION WITH MENU AI -->
<div class="recommendations" id="smartRecommendations">
    <h3>
        <i data-lucide="brain-circuit"></i>
        Complete Business Intelligence Hub
    </h3>
    
    <!-- NAVIGATION TABS -->
    <div class="intelligence-tabs">
        <button class="intel-tab active" onclick="switchIntelligence('overview')" id="overview-tab">
            üìä Business Overview
        </button>
        <button class="intel-tab" onclick="switchIntelligence('menu')" id="menu-tab">
            üß† Menu AI Optimizer
        </button>
        <button class="intel-tab" onclick="switchIntelligence('crisis')" id="crisis-tab">
            üÜò Crisis Protection
        </button>
        <button class="intel-tab" onclick="switchIntelligence('savings')" id="savings-tab">
            üí∞ Agency Savings
        </button>
    </div>
    
    <!-- OVERVIEW TAB CONTENT -->
    <div class="intel-content active" id="overview-content">
        <!-- LIVE SAVINGS TRACKER -->
        <div style="background: linear-gradient(135deg, #00b894, #00a085); color: white; padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 20px; animation: slideInDown 0.6s ease-out;">
            <div style="font-size: 2.5em; font-weight: bold; margin-bottom: 8px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);" id="liveSavings">¬£23,847</div>
            <div style="font-size: 1.1em; opacity: 0.9;">Total saved vs agencies + waste eliminated + revenue increase this month! üí∞</div>
            <div style="font-size: 0.9em; opacity: 0.8; margin-top: 5px;">Growing every day as you keep optimising your business!</div>
        </div>
        
        <!-- INTEGRATED INSIGHTS GRID -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            
            <!-- SMART BUSINESS INSIGHTS -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 12px; border-left: 4px solid #2563eb; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <h4 style="color: #2563eb; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; font-size: 1.1em;">
                    üéØ Smart Business Insights
                </h4>
                <div id="businessInsightsContainer">
                    <!-- Business insights will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- AI MENU INSIGHTS -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 12px; border-left: 4px solid #8b5cf6; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                <h4 style="color: #8b5cf6; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; font-size: 1.1em;">
                    üß† AI Menu Intelligence
                </h4>
                <div id="menuInsightsContainer">
                    <!-- Menu insights will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- IMMEDIATE ACTION PLAN -->
        <div style="background: linear-gradient(135deg, #eff6ff, #dbeafe); padding: 20px; border-radius: 12px; border: 2px solid #3b82f6; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
            <h4 style="color: #1e40af; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; font-size: 1.1em;">
                üöÄ Priority Actions (Implement Today!)
            </h4>
            <div id="priorityActionsContainer">
                <!-- Priority actions will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- MENU AI TAB CONTENT -->
    <div class="intel-content" id="menu-content">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <!-- MENU PERFORMANCE -->
            <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                <h4 style="color: #8b5cf6; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                    üìà Menu Performance Leaders
                </h4>
                <div id="menuPerformanceContainer">
                    <!-- Menu performance will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- WASTE REDUCTION -->
            <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
                <h4 style="color: #059669; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                    ‚ôªÔ∏è Waste Reduction Opportunities
                </h4>
                <div id="wasteReductionContainer">
                    <!-- Waste reduction will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- MENU OPTIMIZER QUICK STATS -->
        <div style="background: linear-gradient(135deg, #fef7ff, #f3e8ff); padding: 20px; border-radius: 12px; border: 2px solid #8b5cf6;">
            <h4 style="color: #7c3aed; margin-bottom: 15px; text-align: center;">üéØ AI Menu Optimization Results</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                <div style="text-align: center; background: white; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 1.8em; font-weight: bold; color: #8b5cf6;" id="menuProfitBoost">+¬£847</div>
                    <div style="font-size: 0.9em; color: #6b7280;">Monthly Profit Boost</div>
                </div>
                <div style="text-align: center; background: white; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 1.8em; font-weight: bold; color: #059669;" id="wasteSavings">¬£623</div>
                    <div style="font-size: 0.9em; color: #6b7280;">Waste Eliminated</div>
                </div>
                <div style="text-align: center; background: white; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 1.8em; font-weight: bold; color: #dc2626;" id="itemsOptimized">7</div>
                    <div style="font-size: 0.9em; color: #6b7280;">Items Optimized</div>
                </div>
                <div style="text-align: center; background: white; padding: 15px; border-radius: 8px;">
                    <div style="font-size: 1.8em; font-weight: bold; color: #f59e0b;" id="efficiencyGain">+23%</div>
                    <div style="font-size: 0.9em; color: #6b7280;">Kitchen Efficiency</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- CRISIS PROTECTION TAB CONTENT -->
    <div class="intel-content" id="crisis-content">
        <div style="background: linear-gradient(135deg, #fef2f2, #fee2e2); padding: 20px; border-radius: 12px; border: 2px solid #ef4444; margin-bottom: 20px;">
            <h4 style="color: #dc2626; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                üõ°Ô∏è Crisis Protection Status
            </h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <div style="color: #7f1d1d; font-weight: 600; margin-bottom: 10px;">‚úÖ Protections Active:</div>
                    <ul style="color: #7f1d1d; font-size: 0.9em; line-height: 1.6;">
                        <li>Pandemic response system ready</li>
                        <li>Disaster recovery protocols loaded</li>
                        <li>Economic downturn survival tools prepared</li>
                        <li>Staff shortage solutions activated</li>
                    </ul>
                </div>
                <div>
                    <div style="color: #7f1d1d; font-weight: 600; margin-bottom: 10px;">üöÄ Deployment Time:</div>
                    <div style="background: white; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #dc2626;">24hrs</div>
                        <div style="font-size: 0.9em; color: #6b7280;">vs 3 weeks for agencies</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="crisisReadinessContainer">
            <!-- Crisis readiness info will be populated by JavaScript -->
        </div>
    </div>
    
    <!-- AGENCY SAVINGS TAB CONTENT -->
    <div class="intel-content" id="savings-content">
        <div style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); padding: 20px; border-radius: 12px; border: 2px solid #22c55e; margin-bottom: 20px;">
            <h4 style="color: #16a34a; margin-bottom: 15px; text-align: center;">üí∞ Your Massive Agency Savings</h4>
            <div id="agencySavingsContainer">
                <!-- Agency savings breakdown will be populated by JavaScript -->
            </div>
        </div>
        
        <div style="background: white; padding: 20px; border-radius: 12px; border: 1px solid #e5e7eb;">
            <h4 style="color: #374151; margin-bottom: 15px;">üìä Savings Breakdown This Month</h4>
            <div id="savingsBreakdownContainer">
                <!-- Detailed savings breakdown will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- REFRESH INSIGHTS BUTTON -->
    <button class="btn btn-primary" style="margin-top: 15px; background: linear-gradient(135deg, #3b82f6, #1d4ed8);" onclick="refreshCompleteIntelligence()">
        <i data-lucide="refresh-cw" id="refreshIcon"></i>
        Refresh Complete Intelligence
    </button>
</div>
















        <!-- PACK PERFORMANCE SECTION -->
        <div class="pack-performance">
            <h3 style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
                <i data-lucide="package"></i>
                Your Business Packs Performance
            </h3>
            <div class="pack-grid">
                <div class="pack-card">
                    <div class="pack-header">
                        <div class="pack-icon">üçΩÔ∏è</div>
                        <div>
                            <div class="pack-title">Restaurant Pack</div>
                            <div style="font-size: 12px; color: #6b7280;">Menu, WiFi, Reviews, Booking</div>
                        </div>
                    </div>
                    <div class="pack-stats">
                        <div class="pack-stat">
                            <div class="pack-stat-value">2,847</div>
                            <div class="pack-stat-label">Total Scans</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">89%</div>
                            <div class="pack-stat-label">Menu QR Usage</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">156</div>
                            <div class="pack-stat-label">WiFi Connects</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">23</div>
                            <div class="pack-stat-label">New Reviews</div>
                        </div>
                    </div>
                </div>

                <div class="pack-card">
                    <div class="pack-header">
                        <div class="pack-icon">üõçÔ∏è</div>
                        <div>
                            <div class="pack-title">Retail Pack</div>
                            <div style="font-size: 12px; color: #6b7280;">Products, Social, Loyalty, Support</div>
                        </div>
                    </div>
                    <div class="pack-stats">
                        <div class="pack-stat">
                            <div class="pack-stat-value">1,234</div>
                            <div class="pack-stat-label">Product Views</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">67%</div>
                            <div class="pack-stat-label">Social Follows</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">45</div>
                            <div class="pack-stat-label">Loyalty Signups</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">12</div>
                            <div class="pack-stat-label">Support Tickets</div>
                        </div>
                    </div>
                </div>

                <div class="pack-card">
                    <div class="pack-header">
                        <div class="pack-icon">üíª</div>
                        <div>
                            <div class="pack-title">Website Builder</div>
                            <div style="font-size: 12px; color: #6b7280;">Landing Page, Forms, Analytics</div>
                        </div>
                    </div>
                    <div class="pack-stats">
                        <div class="pack-stat">
                            <div class="pack-stat-value">486</div>
                            <div class="pack-stat-label">Website Views</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">8.4%</div>
                            <div class="pack-stat-label">Conversion Rate</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">34</div>
                            <div class="pack-stat-label">Form Submissions</div>
                        </div>
                        <div class="pack-stat">
                            <div class="pack-stat-value">2:45</div>
                            <div class="pack-stat-label">Avg Time on Site</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-grid">
            <div class="chart-card">
                <h3>
                    <i data-lucide="bar-chart-3"></i>
                    Daily Customer Interactions
                </h3>
                <div class="chart-container">
                    <canvas id="dailyScansChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h3>
                    <i data-lucide="pie-chart"></i>
                    QR Code Performance
                </h3>
                <div class="chart-container">
                    <canvas id="qrPerformanceChart"></canvas>
                </div>
            </div>

            <div class="chart-card full-width-chart">
                <h3>
                    <i data-lucide="trending-up"></i>
                    Customer Engagement Trends
                </h3>
                <div class="chart-container">
                    <canvas id="engagementTrendsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Data Tables -->
        <div class="tables-grid">
            <div class="table-card">
                <h3>Top Performing QR Codes</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>QR Code</th>
                            <th>Scans</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="qr-name">üçΩÔ∏è Menu QR</div>
                                <div class="qr-id">QR-MENU-001</div>
                            </td>
                            <td>1,847</td>
                            <td><span class="badge badge-success">Active</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="qr-name">üì∂ WiFi QR</div>
                                <div class="qr-id">QR-WIFI-002</div>
                            </td>
                            <td>1,234</td>
                            <td><span class="badge badge-success">Active</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="qr-name">‚≠ê Reviews QR</div>
                                <div class="qr-id">QR-REV-003</div>
                            </td>
                            <td>567</td>
                            <td><span class="badge badge-warning">Needs Boost</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="qr-name">üìÖ Booking QR</div>
                                <div class="qr-id">QR-BOOK-004</div>
                            </td>
                            <td>432</td>
                            <td><span class="badge badge-info">Growing</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="qr-name">üõçÔ∏è Products QR</div>
                                <div class="qr-id">QR-PROD-005</div>
                            </td>
                            <td>487</td>
                            <td><span class="badge badge-success">Active</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="table-card">
                <h3>Recent Customer Activity</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>QR Code</th>
                            <th>Location</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2 mins ago</td>
                            <td>Menu QR</td>
                            <td>Table 7</td>
                        </tr>
                        <tr>
                            <td>5 mins ago</td>
                            <td>WiFi QR</td>
                            <td>Table 3</td>
                        </tr>
                        <tr>
                            <td>8 mins ago</td>
                            <td>Menu QR</td>
                            <td>Table 12</td>
                        </tr>
                        <tr>
                            <td>12 mins ago</td>
                            <td>Reviews QR</td>
                            <td>Table 5</td>
                        </tr>
                        <tr>
                            <td>15 mins ago</td>
                            <td>Booking QR</td>
                            <td>Reception</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global variables for real-time updates
        let realtimeInterval;
        let isRealtimeActive = false;

        // Sample data for charts
        const chartData = {
            dailyScans: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                data: [234, 456, 345, 567, 789, 890, 678]
            },
            qrPerformance: {
                labels: ['Menu QR', 'WiFi QR', 'Reviews QR', 'Booking QR', 'Products QR'],
                data: [1847, 1234, 567, 432, 487]
            },
            engagementTrends: {
                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                data: [2100, 2800, 3200, 4567]
            }
        };

        // Initialize charts
        function initializeCharts() {
            // Daily Scans Chart
            const dailyCtx = document.getElementById('dailyScansChart').getContext('2d');
            new Chart(dailyCtx, {
                type: 'bar',
                data: {
                    labels: chartData.dailyScans.labels,
                    datasets: [{
                        label: 'Customer Interactions',
                        data: chartData.dailyScans.data,
                        backgroundColor: 'rgba(37, 99, 235, 0.8)',
                        borderColor: 'rgba(37, 99, 235, 1)',
                        borderWidth: 2,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // QR Performance Chart
            const qrCtx = document.getElementById('qrPerformanceChart').getContext('2d');
            new Chart(qrCtx, {
                type: 'doughnut',
                data: {
                    labels: chartData.qrPerformance.labels,
                    datasets: [{
                        data: chartData.qrPerformance.data,
                        backgroundColor: [
                            '#2563eb',
                            '#00b894',
                            '#fdcb6e',
                            '#fd79a8',
                            '#74b9ff'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });

            // Engagement Trends Chart
            const trendsCtx = document.getElementById('engagementTrendsChart').getContext('2d');
            new Chart(trendsCtx, {
                type: 'line',
                data: {
                    labels: chartData.engagementTrends.labels,
                    datasets: [{
                        label: 'Total Interactions',
                        data: chartData.engagementTrends.data,
                        borderColor: '#00b894',
                        backgroundColor: 'rgba(0, 184, 148, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#00b894',
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // User menu functionality
        function toggleUserMenu() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const userMenu = document.querySelector('.user-menu');
            const dropdown = document.getElementById('userDropdown');
            
            if (!userMenu.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Real-time toggle functionality
        function toggleRealTime() {
            const toggle = document.getElementById('realtimeToggle');
            const icon = document.getElementById('refreshIcon');
            const text = document.getElementById('realtimeText');
            
            isRealtimeActive = !isRealtimeActive;
            
            if (isRealtimeActive) {
                toggle.classList.remove('inactive');
                toggle.classList.add('active');
                text.textContent = 'Real-time ON';
                icon.classList.add('spinning');
                startRealtimeUpdates();
                showSuccessBanner('Real-time Updates Activated!', 'Your dashboard will now update automatically every 30 seconds.');
            } else {
                toggle.classList.remove('active');
                toggle.classList.add('inactive');
                text.textContent = 'Real-time OFF';
                icon.classList.remove('spinning');
                stopRealtimeUpdates();
            }
        }

        // Start real-time updates
        function startRealtimeUpdates() {
            realtimeInterval = setInterval(() => {
                updateMetrics();
            }, 30000); // Update every 30 seconds
        }

        // Stop real-time updates
        function stopRealtimeUpdates() {
            if (realtimeInterval) {
                clearInterval(realtimeInterval);
            }
        }

        // Update metrics with simulated data
        function updateMetrics() {
            const totalScans = document.getElementById('myTotalScans');
            const currentValue = parseInt(totalScans.textContent.replace(',', ''));
            const newValue = currentValue + Math.floor(Math.random() * 10) + 1;
            totalScans.textContent = newValue.toLocaleString();
            
            // Update savings
            const savings = document.getElementById('totalSavings');
            const currentSavings = parseInt(savings.textContent.replace('¬£', '').replace(',', ''));
            const newSavings = currentSavings + Math.floor(Math.random() * 50) + 10;
            savings.textContent = `¬£${newSavings.toLocaleString()}`;
        }

        // Success banner functionality
        function showSuccessBanner(title, message) {
            const banner = document.getElementById('successBanner');
            const titleEl = document.getElementById('successTitle');
            const messageEl = document.getElementById('successMessage');
            
            titleEl.textContent = title;
            messageEl.textContent = message;
            banner.style.display = 'block';
            
            setTimeout(() => {
                banner.style.display = 'none';
            }, 5000);
        }

        // Pack creation functions
        function createRestaurantPack() {
            showSuccessBanner('Restaurant Pack Created!', 'Your complete restaurant solution is ready to boost customer engagement.');
        }

        function createRetailPack() {
            showSuccessBanner('Retail Pack Created!', 'Your retail marketing toolkit is ready to drive sales and customer loyalty.');
        }

        function createWebsiteBuilder() {
            showSuccessBanner('Website Builder Activated!', 'Your professional website is being generated. Save ¬£9,900 vs agencies!');
        }

        function createNewQR() {
            showSuccessBanner('Custom QR Created!', 'Your personalized QR code solution is ready to connect with customers.');
        }

        // Logout functionality
        function logout() {
            alert('Logging out... Your business data is securely saved!');
        }

        // Filter functionality
        document.getElementById('timeRange').addEventListener('change', function() {
            const value = this.value;
            console.log('Time range changed to:', value);
            // Here you would typically update the charts and data
        });

        document.getElementById('qrFilter').addEventListener('change', function() {
            const value = this.value;
            console.log('QR filter changed to:', value);
            // Here you would typically filter the displayed data
        });

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();


// Initialize the business intelligence system
setTimeout(() => {
    initializeBusinessIntelligence();
}, 1000);

// Show business intelligence welcome message
setTimeout(() => {
    showSuccessBanner('üß† AI Business Coach Activated!', `Welcome ${businessIntelligence.restaurantName}! Your personal business consultant is analyzing your data and finding opportunities to boost revenue. Check out your savings vs agencies!`);
}, 4000);


            
            // Show welcome message after a short delay
            setTimeout(() => {
                showSuccessBanner('Welcome Back', 'Your improvements are working and building momentum! +23.4% growth this week.');
            }, 1000);
        });

        // Achievement unlocking simulation
        function checkAchievements() {
            const totalScans = parseInt(document.getElementById('myTotalScans').textContent.replace(',', ''));
            
            if (totalScans >= 5000) {
                unlockAchievement('QR Legend', 'You\'ve reached 5,000+ customer interactions!');
            }
        }

        function unlockAchievement(title, message) {
            // Find and unlock the achievement
            const achievements = document.querySelectorAll('.achievement.locked');
            achievements.forEach(achievement => {
                const achTitle = achievement.querySelector('.achievement-title');
                if (achTitle && achTitle.textContent === title) {
                    achievement.classList.remove('locked');
                    achievement.classList.add('unlocked');
                    showSuccessBanner(`üèÜ Achievement Unlocked: ${title}`, message);
                }
            });
        }

        // Simulate periodic achievement checks
        setInterval(checkAchievements, 60000); // Check every minute
    




// ADD THIS TO YOUR EXISTING JAVASCRIPT (after your current functions)

// Business Intelligence Data System
let businessIntelligence = {
    restaurantName: "Mario's Italian Kitchen", // Will be replaced with real user data
    totalSavings: 18947,
    lastUpdated: new Date(),
    qrData: {
        menu: { scans: 2847, weeklyGrowth: 23, conversionRate: 47.2, peakHours: "7-9 PM" },
        wifi: { scans: 1234, weeklyGrowth: 15, conversionRate: 89.3, peakDays: "Weekends" },
        review: { scans: 567, weeklyGrowth: -5, conversionRate: 12.1, placement: "tables" },
        booking: { scans: 432, weeklyGrowth: 8, conversionRate: 8.4, timePreference: "dinner" },
        specials: { scans: 487, weeklyGrowth: 45, conversionRate: 23.7, platform: "social" }
    }
};

// Agency vs Our Pricing Database
const agencyPricingDatabase = [
    { service: "QR Menu System", agency: 2500, ours: 30, category: "Essential" },
    { service: "Analytics Dashboard", agency: 4000, ours: 0, category: "Premium" },
    { service: "Review Management", agency: 1500, ours: 25, category: "Reputation" },
    { service: "WiFi QR Setup", agency: 800, ours: 15, category: "Customer Experience" },
    { service: "Business Consulting", agency: 2200, ours: 0, category: "Strategy" },
    { service: "Monthly Reporting", agency: 1800, ours: 0, category: "Analytics" },
    { service: "Social Media QRs", agency: 1200, ours: 20, category: "Marketing" },
    { service: "Booking Integration", agency: 3000, ours: 50, category: "Operations" }
];

// AI Insights Generator
function generateAIInsights() {
    const insights = [
        {
            type: "urgent",
            icon: "üî•",
            title: "URGENT: Move Review QR to Checkout Counter",
            description: `Your review QR converts only ${businessIntelligence.qrData.review.conversionRate}% at tables. Checkout placement typically achieves 35-40%.`,
            impact: "Expected: +200% more reviews = higher Google rankings",
            savings: "¬£1,500 consultant fee avoided",
            expectedRevenue: "¬£800 monthly from increased visibility"
        },
        {
            type: "opportunity",
            icon: "üí°", 
            title: `Peak Hour Goldmine: ${businessIntelligence.qrData.menu.peakHours}`,
            description: "Menu QR peaks during dinner time. Perfect opportunity for dessert and premium drink upselling.",
            impact: "Expected: +25% average order value during peak hours",
            savings: "¬£2,200 marketing consultant avoided",
            expectedRevenue: "¬£1,200 monthly from strategic upselling"
        },
        {
            type: "success",
            icon: "üöÄ",
            title: `Specials QR Crushing It (+${businessIntelligence.qrData.specials.weeklyGrowth}% Growth)`,
            description: "Your fastest growing QR! Social media placement is working brilliantly. Scale this success.",
            impact: "Opportunity: Apply this strategy to other QR codes",
            savings: "¬£3,000 social media strategy avoided",
            expectedRevenue: "¬£600 monthly by scaling successful tactics"
        },
        {
            type: "warning",
            icon: "‚ö†Ô∏è",
            title: "WiFi QR Weekend Opportunity",
            description: `WiFi QR gets ${businessIntelligence.qrData.wifi.peakDays} peak traffic. Add weekend-only special offers to capture this audience.`,
            impact: "Expected: +15% weekend revenue with targeted offers",
            savings: "¬£1,800 weekend marketing strategy avoided",
            expectedRevenue: "¬£400 monthly from weekend promotions"
        }
    ];
    
    // Return different insights each time for variety
    const shuffled = insights.sort(() => 0.5 - Math.random());
    return shuffled.slice(0, 3);
}

// Cost Comparison Generator
function generateCostComparisons() {
    const comparisons = agencyPricingDatabase.slice(0, 5).map(item => ({
        ...item,
        savings: item.agency - item.ours,
        savingsPercentage: Math.round(((item.agency - item.ours) / item.agency) * 100)
    }));
    
    return comparisons;
}

// Action Plan Generator
function generateActionPlan() {
    const plans = [
        {
            priority: "HIGH",
            icon: "üéØ",
            action: "Move review QR to checkout counter TODAY",
            timeframe: "Immediate (0-24 hours)",
            difficulty: "Easy",
            expectedROI: "+¬£800 monthly from increased reviews",
            steps: ["Print new review QR", "Place at checkout", "Train staff to mention it"]
        },
        {
            priority: "HIGH",
            icon: "üç∞", 
            action: "Add dessert specials to 7-9 PM menu display",
            timeframe: "This week",
            difficulty: "Easy",
            expectedROI: "+¬£1,200 monthly from upselling",
            steps: ["Update menu QR link", "Add dessert highlights", "Train staff on recommendations"]
        },
        {
            priority: "MEDIUM",
            icon: "üì±",
            action: "Create weekend-only WiFi QR offers",
            timeframe: "Next week", 
            difficulty: "Medium",
            expectedROI: "+¬£400 monthly weekend boost",
            steps: ["Design weekend offer", "Update WiFi QR destination", "Promote on social media"]
        },
        {
            priority: "LOW",
            icon: "üìä",
            action: "Scale successful specials QR strategy",
            timeframe: "This month",
            difficulty: "Medium", 
            expectedROI: "+¬£600 monthly from optimization",
            steps: ["Analyze top performing posts", "Apply strategy to other QRs", "Track and optimize"]
        }
    ];
    
    return plans.slice(0, 3);
}

// Render Functions
function renderAIInsights() {
    const insights = generateAIInsights();
    const container = document.getElementById('aiInsightsContainer');
    
    if (!container) return;
    
    container.innerHTML = insights.map(insight => `
        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 12px; border-left: 3px solid ${
            insight.type === 'urgent' ? '#ff6b6b' : 
            insight.type === 'opportunity' ? '#00b894' : 
            insight.type === 'success' ? '#74b9ff' : '#f59e0b'
        }; transition: all 0.3s; cursor: pointer;" onclick="showInsightDetail('${insight.title}', '${insight.expectedRevenue}')">
            <div style="font-weight: 600; color: #111827; margin-bottom: 5px; display: flex; align-items: center; gap: 6px; font-size: 0.95em;">
                <span>${insight.icon}</span>
                ${insight.title}
            </div>
            <div style="color: #6b7280; font-size: 0.85em; margin-bottom: 8px; line-height: 1.4;">${insight.description}</div>
            <div style="color: #059669; font-size: 0.8em; font-weight: 500; margin-bottom: 4px;">üí∞ ${insight.impact}</div>
            <div style="color: #2563eb; font-size: 0.75em; font-style: italic;">Saves: ${insight.savings}</div>
        </div>
    `).join('');
}

function renderCostComparisons() {
    const comparisons = generateCostComparisons();
    const container = document.getElementById('costComparisonContainer');
    
    if (!container) return;
    
    container.innerHTML = comparisons.map(comp => `
        <div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; transition: all 0.3s; cursor: pointer;" onclick="showCostDetail('${comp.service}', ${comp.agency}, ${comp.ours})">
            <div style="font-size: 0.85em; font-weight: 500; color: #374151;">${comp.service}</div>
            <div style="display: flex; gap: 8px; align-items: center;">
                <span style="color: #dc2626; text-decoration: line-through; font-size: 0.75em; opacity: 0.7;">¬£${comp.agency.toLocaleString()}</span>
                <span style="color: #059669; font-weight: bold; font-size: 0.85em; background: #d1fae5; padding: 2px 6px; border-radius: 4px;">¬£${comp.ours}</span>
                <span style="color: #f59e0b; font-size: 0.7em; font-weight: bold;">${comp.savingsPercentage}% OFF</span>
            </div>
        </div>
    `).join('');
}

function renderActionPlan() {
    const actions = generateActionPlan();
    const container = document.getElementById('actionPlanContainer');
    
    if (!container) return;
    
    container.innerHTML = actions.map(action => `
        <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 3px solid ${
            action.priority === 'HIGH' ? '#ff6b6b' : 
            action.priority === 'MEDIUM' ? '#f59e0b' : '#74b9ff'
        }; transition: all 0.3s; cursor: pointer;" onclick="showActionDetail('${action.action}', '${action.expectedROI}')">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <span style="background: ${
                    action.priority === 'HIGH' ? '#fee2e2' : 
                    action.priority === 'MEDIUM' ? '#fef3c7' : '#dbeafe'
                }; color: ${
                    action.priority === 'HIGH' ? '#dc2626' : 
                    action.priority === 'MEDIUM' ? '#92400e' : '#1e40af'
                }; padding: 2px 8px; border-radius: 12px; font-size: 0.7em; font-weight: bold;">${action.priority}</span>
                <span style="color: #6b7280; font-size: 0.75em;">${action.timeframe}</span>
            </div>
            <div style="font-weight: 600; color: #111827; margin-bottom: 5px; font-size: 0.9em; display: flex; align-items: center; gap: 6px;">
                <span>${action.icon}</span>
                ${action.action}
            </div>
            <div style="color: #059669; font-size: 0.8em; font-weight: 500;">${action.expectedROI}</div>
        </div>
    `).join('');
}

// Interactive Functions
function refreshBusinessIntelligence() {
    const icon = document.getElementById('refreshIcon');
    if (icon) {
        icon.classList.add('spinning');
    }
    
    // Show loading states
    document.getElementById('aiInsightsContainer').innerHTML = `
        <div style="text-align: center; color: #6b7280; padding: 20px;">
            <div style="font-size: 2em; margin-bottom: 10px;">ü§ñ</div>
            <div>AI is analyzing fresh data...</div>
        </div>
    `;
    
    // Simulate AI processing time
    setTimeout(() => {
        // Refresh all sections
        renderAIInsights();
        renderCostComparisons(); 
        renderActionPlan();
        
        // Update live savings
        businessIntelligence.totalSavings += Math.floor(Math.random() * 500) + 100;
        const savingsElement = document.getElementById('liveSavings');
        if (savingsElement) {
            savingsElement.textContent = `¬£${businessIntelligence.totalSavings.toLocaleString()}`;
        }
        
        if (icon) {
            icon.classList.remove('spinning');
        }
        
        // Show success message
        showSuccessBanner('Fresh AI Insights Generated!', 'New revenue opportunities discovered. Expected monthly impact: +¬£2,600!');
    }, 2000);
}

function showInsightDetail(title, revenue) {
    alert(`üìä AI Insight Details\n\n"${title}"\n\nThis recommendation is based on your actual QR performance data and industry benchmarks.\n\nüí∞ Expected Revenue Impact: ${revenue}\n\nüéØ Implementation: Follow the steps in your action plan below.\n\nüí° Pro tip: This type of business intelligence typically costs ¬£2,000+ from consultants!`);
}

function showCostDetail(service, agencyPrice, ourPrice) {
    const savings = agencyPrice - ourPrice;
    const percentage = Math.round((savings / agencyPrice) * 100);
    
    alert(`üí∞ Cost Comparison: ${service}\n\nüè¢ Agency Price: ¬£${agencyPrice.toLocaleString()}\nüöÄ Our Price: ¬£${ourPrice}\nüí∞ You Save: ¬£${savings.toLocaleString()} (${percentage}%)\n\nüéâ This is why smart business owners choose us over expensive agencies!\n\nYour total savings this month: ¬£${businessIntelligence.totalSavings.toLocaleString()}`);
}

function showActionDetail(action, roi) {
    alert(`üéØ Action Plan Details\n\n"${action}"\n\nüí∞ Expected ROI: ${roi}\n\nüìã Why this works:\n‚Ä¢ Based on your actual QR scan patterns\n‚Ä¢ Proven strategy from successful restaurants\n‚Ä¢ Low effort, high impact implementation\n\nüöÄ Ready to implement? This type of strategic advice normally costs ¬£200+ per hour from business consultants!`);
}

// Initialize Business Intelligence System
function initializeBusinessIntelligence() {
    // Get restaurant name from existing dashboard
    const companyElement = document.getElementById('companyInfo');
    if (companyElement) {
        businessIntelligence.restaurantName = companyElement.textContent.trim();
    }
    
    // Render all sections
    renderAIInsights();
    renderCostComparisons();
    renderActionPlan();
    
    // Set up automatic savings updates (every 2 minutes)
    setInterval(() => {
        businessIntelligence.totalSavings += Math.floor(Math.random() * 50) + 20;
        const savingsElement = document.getElementById('liveSavings');
        if (savingsElement) {
            savingsElement.textContent = `¬£${businessIntelligence.totalSavings.toLocaleString()}`;
        }
    }, 120000);
    
    console.log('üß† Business Intelligence System Initialized for:', businessIntelligence.restaurantName);
}





function renderBusinessInsights() {
const container = document.getElementById('businessInsightsContainer');
if (!container) return;
const insights = [
{
title: "Your menu QR is crushing it!",
description: "47.2% conversion rate crushes industry average of 23%",
confidence: "98%",
category: "success"
},
{
title: "Peak scanning: 7-9 PM",
description: "73% of scans happen during dinner service",
confidence: "94%",
category: "optimization"
}
];
container.innerHTML = insights.map(insight => `
<div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.3s;" onclick="showIntegratedInsight('${insight.title}', '${insight.category}')">
<div style="font-weight: 600; color: #374151; margin-bottom: 4px; font-size: 0.9em;">${insight.title}</div>
<div style="color: #6b7280; font-size: 0.8em; margin-bottom: 4px;">${insight.description}</div>
<div style="color: #059669; font-size: 0.75em; font-weight: 500;">Confidence: ${insight.confidence}</div>
</div>
`).join('');
}
function renderMenuInsights() {
const container = document.getElementById('menuInsightsContainer');
if (!container) return;
const menuData = [
{
title: "Margherita Pizza is your goldmine",
description: "160% better performance than competitors",
confidence: "96%",
category: "winner"
},
{
title: "Fish & chips draining profits",
description: "Low orders, poor margin, high waste",
confidence: "91%",
category: "problem"
}
];
container.innerHTML = menuData.map(item => `
<div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.3s;" onclick="showIntegratedInsight('${item.title}', '${item.category}')">
<div style="font-weight: 600; color: #374151; margin-bottom: 4px; font-size: 0.9em;">${item.title}</div>
<div style="color: #6b7280; font-size: 0.8em; margin-bottom: 4px;">${item.description}</div>
<div style="color: #8b5cf6; font-size: 0.75em; font-weight: 500;">AI Confidence: ${item.confidence}</div>
</div>
`).join('');
}
function renderPriorityActions() {
const container = document.getElementById('priorityActionsContainer');
if (!container) return;
const actions = [
{
title: "Move review QR to checkout counter",
priority: "HIGH",
impact: "+200% review conversion"
},
{
title: "Feature pizza prominently on menu",
priority: "HIGH",
impact: "+¬£420 monthly profit"
},
{
title: "Eliminate fish & chips waste",
priority: "MEDIUM",
impact: "¬£520 monthly savings"
},
{
title: "Create dessert bundle offers",
priority: "MEDIUM",
impact: "+¬£340 monthly"
}
];
container.innerHTML = actions.map(action => `
<div style="background: white; padding: 12px; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: all 0.3s; border-left: 3px solid ${action.priority === 'HIGH' ? '#ef4444' : '#f59e0b'};" onclick="showActionDetail('${action.title}')">
<div style="display: flex; justify-content: between; align-items: center; margin-bottom: 4px;">
<span style="font-weight: 600; color: #374151; font-size: 0.9em;">${action.title}</span>
<span style="background: ${action.priority === 'HIGH' ? '#fee2e2' : '#fef3c7'}; color: ${action.priority === 'HIGH' ? '#dc2626' : '#92400e'}; padding: 2px 6px; border-radius: 10px; font-size: 0.7em; font-weight: bold;">${action.priority}</span>
</div>
<div style="color: #059669; font-size: 0.8em; font-weight: 500;">${action.impact}</div>
</div>
`).join('');
}


// 2. ADD THE TAB SWITCHING FUNCTION:
function switchIntelligence(tabType) {
// Hide all content sections
document.querySelectorAll('.intel-content').forEach(content => {
content.classList.remove('active');
});
// Remove active class from all tabs
document.querySelectorAll('.intel-tab').forEach(tab => {
tab.classList.remove('active');
});
// Show selected content and activate tab
const contentElement = document.getElementById(`${tabType}-content`);
const tabElement = document.getElementById(`${tabType}-tab`);
if (contentElement) contentElement.classList.add('active');
if (tabElement) tabElement.classList.add('active');
// Load specific content based on tab

if (tabType === 'overview') {
renderBusinessInsights();
renderMenuInsights();
renderPriorityActions();

} else if (tabType === 'menu') {
renderMenuPerformance();
renderWasteReduction();

} else if (tabType === 'crisis') {
renderCrisisReadiness();

}else if (tabType === 'savings') {
   renderSavingsIntelligence();
}



}// 3. ADD MENU PERFORMANCE RENDERING:
function renderMenuPerformance() {
const container = document.getElementById('menuPerformanceContainer');
if (!container) return;
const performers = [
{ name: "Margherita Pizza", profit: "¬£12.50", margin: "67%", orders: "45/day" },
{ name: "Chicken Parmesan", profit: "¬£8.90", margin: "58%", orders: "32/day" },
{ name: "Caesar Salad", profit: "¬£6.20", margin: "72%", orders: "28/day" },
{ name: "Garlic Bread", profit: "¬£4.10", margin: "81%", orders: "67/day" }
];
container.innerHTML = performers.map(item => `
<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f3f4f6;">
<div>
<div style="font-weight: 500; color: #374151; font-size: 0.9em;">${item.name}</div>
<div style="font-size: 0.8em; color: #6b7280;">${item.orders}</div>
</div>
<div style="text-align: right;">
<div style="font-weight: bold; color: #16a34a; font-size: 0.9em;">${item.profit}</div>
<div style="font-size: 0.8em; color: #059669;">${item.margin} margin</div>
</div>
</div>
`).join('');
}
function renderWasteReduction() {
const container = document.getElementById('wasteReductionContainer');
if (!container) return;
const wasteItems = [
{ name: "Fish & Chips", waste: "¬£89/week", action: "Remove from menu", savings: "¬£374/month" },
{ name: "Seafood Pasta", waste: "¬£45/week", action: "Reduce portions", savings: "¬£156/month" },
{ name: "Daily Specials", waste: "¬£23/week", action: "Better forecasting", savings: "¬£89/month" }
];
container.innerHTML = wasteItems.map(item => `
<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f3f4f6;">
<div>
<div style="font-weight: 500; color: #374151; font-size: 0.9em;">${item.name}</div>
<div style="font-size: 0.8em; color: #dc2626;">${item.waste} waste</div>
</div>
<div style="text-align: right;">
<div style="font-weight: bold; color: #16a34a; font-size: 0.8em;">${item.savings}</div>
<div style="font-size: 0.75em; color: #6b7280;">${item.action}</div>
</div>
</div>
`).join('');
}
// 4. ADD CRISIS READINESS RENDERING:
function renderCrisisReadiness() {
const container = document.getElementById('crisisReadinessContainer');
if (!container) return;
container.innerHTML = `
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
<div style="background: white; padding: 15px; border-radius: 8px;">
<div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Pandemic Response</div>
<div style="font-size: 0.85em; color: #6b7280;">Contactless systems ready</div>
</div>
<div style="background: white; padding: 15px; border-radius: 8px;">
<div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Economic Downturn</div>
<div style="font-size: 0.85em; color: #6b7280;">Cost optimization tools active</div>
</div>
<div style="background: white; padding: 15px; border-radius: 8px;">
<div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Supply Chain Issues</div>
<div style="font-size: 0.85em; color: #6b7280;">Alternative supplier database ready</div>
</div>
<div style="background: white; padding: 15px; border-radius: 8px;">
<div style="font-weight: 600; color: #374151; margin-bottom: 5px;">Staff Solutions</div>
<div style="font-size: 0.85em; color: #6b7280;">Self-service systems ready</div>
</div>
</div>
<div style="background: #fef3c7; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center; border: 1px solid #f59e0b;">
<div style="color: #92400e; font-weight: 600; margin-bottom: 8px;">‚ö° Emergency Response Time</div>
<div style="color: #92400e;">Your crisis solutions deploy in <strong>24 hours</strong> vs <strong>3 weeks</strong> for agencies</div>
</div>
`;
}
// 5. ADD THE COMPLETE INTELLIGENCE DATA OBJECT:
const completeIntelligence = {
agencySavings: {
totalSavings: 23847,
breakdown: [
{ service: "QR Menu System", agency: 2500, ours: 30, saved: 2470 },
{ service: "Digital Marketing", agency: 3000, ours: 300, saved: 2700 },
{ service: "Customer Analytics", agency: 1500, ours: 0, saved: 1500 },
{ service: "Menu Design", agency: 800, ours: 50, saved: 750 },
{ service: "Review Management", agency: 600, ours: 25, saved: 575 },
{ service: "Social Media QRs", agency: 1200, ours: 20, saved: 1180 },
{ service: "Website Integration", agency: 500, ours: 0, saved: 500 },
{ service: "Business Consulting", agency: 2200, ours: 0, saved: 2200 }
]
},
businessInsights: [
{
title: "Your menu QR is crushing it!",
description: "47.2% conversion rate crushes industry average of 23%",
category: "success",
confidence: "98%"
},
{
title: "Peak scanning: 7-9 PM",
description: "73% of scans happen during dinner service",
category: "optimization",
confidence: "94%"
}
],
menuInsights: [
{
title: "Margherita Pizza is your goldmine",
description: "160% better performance than competitors",
category: "winner",
confidence: "96%"
},
{
title: "Fish & chips draining profits",
description: "Low orders, poor margin, high waste",
category: "problem",
confidence: "91%"
}
]
};
// 6. ADD MISSING CSS FOR SPINNING ANIMATION:
const spinningCSS = `
.spinning {
animation: spin 1s linear infinite;
}
@keyframes spin {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}
.intel-content {
display: none;
}
.intel-content.active {
display: block;
}
.intel-tab {
background: #f3f4f6;
border: none;
padding: 10px 15px;
border-radius: 6px;
margin-right: 8px;
cursor: pointer;
font-size: 0.9em;
transition: all 0.3s;
}
.intel-tab.active {
background: #3b82f6;
color: white;
}
.intelligence-tabs {
display: flex;
flex-wrap: wrap;
gap: 8px;
margin-bottom: 20px;
}
`;
// Add the CSS to the page
const style = document.createElement('style');
style.textContent = spinningCSS;
document.head.appendChild(style);


</script>

</body>
</html>
